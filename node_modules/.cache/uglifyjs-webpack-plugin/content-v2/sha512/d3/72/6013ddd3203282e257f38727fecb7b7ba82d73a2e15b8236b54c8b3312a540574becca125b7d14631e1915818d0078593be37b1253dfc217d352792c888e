{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"6aba36c8\",\"2d0d63b5\"],{\"3dd7\":function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"HOME PAGE-CONTENT\"},[a(\"q-card\",{staticClass:\"bg-white card-styl\"},[a(\"q-select\",{attrs:{options:e.locationDropDown,\"float-label\":\"Select Source\"},on:{input:e.updateReceivemastersDt},model:{value:e.Source,callback:function(t){e.Source=t},expression:\"Source\"}}),e.Source?a(\"q-table\",{attrs:{data:e.tableData,columns:e.columns,title:\"Received STN\",color:\"black\",filter:e.filter,separator:e.separator,\"row-key\":\"name\",loading:e.loading},scopedSlots:e._u([{key:\"top-right\",fn:function(t){return[a(\"q-search\",{staticClass:\"col-12\",model:{value:e.filter,callback:function(t){e.filter=t},expression:\"filter\"}})]}},{key:\"top-left\",fn:function(t){return[a(\"q-btn\",{attrs:{icon:\"refresh\"},on:{click:e.updateReceivemastersDt}})]}},{key:\"header\",fn:function(t){return a(\"q-tr\",{},[a(\"q-th\",{key:\"received_item_count\",attrs:{props:t}},[e._v(e._s(t.cols[0].label))]),a(\"q-th\",{key:\"destinationCode\",attrs:{props:t}},[e._v(\"Created By\")]),a(\"q-th\",{key:\"totalBags\",attrs:{props:t}},[e._v(e._s(t.cols[3].label))]),a(\"q-th\",{key:\"totalItems\",attrs:{props:t}},[e._v(e._s(t.cols[4].label))]),a(\"q-th\",{key:\"date\",attrs:{props:t}},[e._v(e._s(t.cols[8].label))]),a(\"q-th\",{key:\"status\",attrs:{props:t}},[e._v(e._s(t.cols[9].label))])],1)}},{key:\"body\",fn:function(t){return a(\"q-tr\",{staticClass:\"cursor-pointer\",staticStyle:{\"font-size\":\"15px\"},attrs:{props:t}},[a(\"q-td\",{key:\"received_item_count\",attrs:{props:t},nativeOn:{click:function(a){e.rowClick(t.row)}}},[e._v(e._s(t.row.name))]),a(\"q-td\",{key:\"destinationCode\",attrs:{props:t},nativeOn:{click:function(a){e.rowClick(t.row)}}},[e._v(e._s(t.row.created_by))]),a(\"q-td\",{key:\"totalBags\",attrs:{props:t},nativeOn:{click:function(a){e.rowClick(t.row)}}},[e._v(e._s(t.row.received_bag_count)+\"/\"+e._s(t.row.totalBags))]),a(\"q-td\",{key:\"totalItems\",attrs:{props:t},nativeOn:{click:function(a){e.rowClick(t.row)}}},[e._v(e._s(t.row.received_item_count)+\"/\"+e._s(t.row.totalItems))]),a(\"q-td\",{key:\"date\",attrs:{props:t},nativeOn:{click:function(a){e.rowClick(t.row)}}},[e._v(e._s(t.row.date))]),a(\"q-td\",{key:\"status\",attrs:{props:t},nativeOn:{click:function(a){e.rowClick(t.row)}}},[e._v(e._s(t.row.status))]),a(\"q-td\",[a(\"q-btn\",{staticClass:\"q-mr-xs\",attrs:{color:\"secondary\",icon:\"visibility\",size:\"sm\"},on:{click:function(a){e.navigateToReport(t.row)}}})],1)],1)}}])}):e._e()],1),a(\"q-modal\",{attrs:{\"no-backdrop-dismiss\":\"\",\"no-esc-dismiss\":\"\",\"content-css\":{padding:\"25px\",minWidth:\"70vw\",height:\"100%\"}},model:{value:e.barcodePdfShowModal,callback:function(t){e.barcodePdfShowModal=t},expression:\"barcodePdfShowModal\"}},[a(\"div\",{staticClass:\"bg-white row\",staticStyle:{padding:\"10px 50px\"},attrs:{align:\"center\"}},[a(\"div\",{staticClass:\"row\",staticStyle:{width:\"100%\"}},[a(\"div\",{staticClass:\"col-lg-12 col-md-12 col-sm-12 col-xs-12\",attrs:{align:\"center\"}},[a(\"h5\",{staticClass:\"text-positive\",staticStyle:{margin:\"0px\"}},[a(\"b\",[e._v(\"STN Number  : \")]),e._v(e._s(e.stNumber))])])]),a(\"div\",{staticClass:\"col\",attrs:{align:\"right\"}},[a(\"q-btn\",{attrs:{flat:\"\",round:\"\",dense:\"\"},on:{click:function(t){e.closeBarcodePdfIframe()}}},[e._v(\"X\")])],1),a(\"div\",{staticClass:\"col-lg-12 col-md-12 col-xs-12 col-sm-12\"},[a(\"q-table\",{ref:\"table\",attrs:{data:e.tableData1,columns:e.columns1,color:\"primary\",filter:e.filter,separator:e.separator,\"row-key\":\"name\",loading:e.loading},scopedSlots:e._u([{key:\"top-right\",fn:function(t){return[a(\"q-search\",{staticClass:\"col-12\",model:{value:e.filter,callback:function(t){e.filter=t},expression:\"filter\"}})]}},{key:\"body\",fn:function(t){return a(\"q-tr\",{attrs:{props:t}},e._l(t.cols,function(n){return a(\"q-td\",{key:n.name,attrs:{props:t}},[e._v(\"\\n                  \"+e._s(n.value)+\"\\n                \")])}))}}])})],1)])]),a(\"q-modal\",{attrs:{\"no-backdrop-dismiss\":\"\",\"no-esc-dismiss\":\"\",\"content-css\":{padding:\"20px 20px 20px 20px\",minWidth:\"70vw\",minHeight:\"42vw\"}},model:{value:e.eventsModal,callback:function(t){e.eventsModal=t},expression:\"eventsModal\"}},[a(\"div\",{attrs:{align:\"center\"}},[a(\"h5\",{staticClass:\"text-positive\"},[e._v(\"STN Number: \"),a(\"b\",{staticStyle:{\"margin-left\":\"15px\"}},[e._v(e._s(e.currentStn.name))]),a(\"q-btn\",{staticStyle:{float:\"right\",\"margin-top\":\"-5px\"},attrs:{flat:\"\",round:\"\",dense:\"\"},on:{click:function(t){e.closePopup()}}},[e._v(\"X\")])],1)]),a(\"rtoReturns\",{attrs:{stnNumber:e.stnNumber}})],1),a(\"q-modal\",{attrs:{\"no-backdrop-dismiss\":\"\",\"no-esc-dismiss\":\"\",\"content-css\":{padding:\"25px\",minWidth:\"25vw\",height:\"50px;\"}},model:{value:e.duplicateItem,callback:function(t){e.duplicateItem=t},expression:\"duplicateItem\"}},[e.alreadyScannedItem?a(\"p\",{staticStyle:{\"font-size\":\"17px\"}},[e._v(\"Item already scanned.\")]):e._e(),e.noScannedCarton?a(\"p\",{staticStyle:{\"font-size\":\"17px\"}},[e._v(\"Given carton no is not available in the list.\")]):e._e(),e.noScannedItem?a(\"p\",{staticStyle:{\"font-size\":\"17px\"}},[e._v(\"Given item no is not available in the list.\")]):e._e(),a(\"q-btn\",{attrs:{color:\"primary\",label:\"Ok\"},on:{click:function(t){e.duplicateItem=!1,e.cursorFocus()}}})],1)],1)},s=[];n._withStripped=!0;a(\"cadf\"),a(\"456d\"),a(\"55dd\"),a(\"ac6a\"),a(\"7f7f\");var r=a(\"9523\"),c=a.n(r),o=a(\"c604\"),i=a(\"62a9\"),l=a(\"66d7\"),d=a(\"7b38\"),u=a(\"53fe\"),m=a(\"0952\"),f=a(\"6186\"),b=a(\"bc3a\"),v=a.n(b),g=a(\"133b\"),p=a(\"7259\"),_={components:{QTable:o[\"a\"],QTh:i[\"a\"],QTr:l[\"a\"],QTd:d[\"a\"],QTableColumns:u[\"a\"],QModal:m[\"a\"],QSearch:f[\"a\"],rtoReturns:p[\"default\"]},created:function(){var e=document.getElementById(\"myTopnav\");null!==e&&(e.className=\"topnav\")},mounted:function(){var e=this;firebase.auth().onAuthStateChanged(function(t){firebase.database(app2).ref(\"UserDetails\").child(t.uid).once(\"value\",function(t){e.currentUserDetails=t.val(),e.$store.dispatch(\"example/fetchUserLocId\",t.val().location_id),e.Source=t.val().location_id,e.getLocations(t.val().location_id)})})},data:function(){var e;return e={stnNumber:\"\",filter:\"\",currentStn:{},eventsModal:!1,separator:\"cell\",loading:!1,scan_master:\"\",scan_item:\"\",tableData:[],tableData1:[],stnNumberForPopUp:\"\",expmasters:\"\",expItems:\"\",receivedmasters:0,receivedItems:0,readonly:0,itemReadonly:1,confirmDisabled:!0,endCartonDisable:!1,duplicateItem:!1,alreadyScannedItem:!1,noScannedItem:!1,noScannedCarton:!1,recCount:0,stNumber:\"\",currentScannedItemLocation:\"\",scannedItem:\"\",scannedMBag:\"\",scanBagAlone:0,mbagselected:0},c()(e,\"receivedItems\",0),c()(e,\"firsttoggle\",1),c()(e,\"receBagCount\",0),c()(e,\"barcodePdfShowModal\",!1),c()(e,\"pdfUrl\",!1),c()(e,\"afterScanData\",{stn_number:\"\",masters:{}}),c()(e,\"dataForCurrentStn\",{stn_number:\"\",masters:{}}),c()(e,\"columns\",[{name:\"stnNumer\",required:!0,label:\"STN Number\",align:\"center\",field:\"name\",sortable:!0},{name:\"destinationCode\",label:\"Destination Code\",align:\"center\",field:\"destinationCode\",sortable:!0},{name:\"sourceCode\",label:\"Source Code\",align:\"center\",field:\"sourceCode\",sortable:!0},{name:\"totalBags\",label:\"No of masters\",align:\"center\",field:\"totalBags\",sortable:!0},{name:\"totalItems\",label:\"No of Items\",align:\"center\",field:\"totalItems\",sortable:!0},{name:\"vehicle_no\",label:\"Vehicle No\",align:\"center\",field:\"vehicle_no\",sortable:!0},{name:\"received_bag_count\",label:\"Received masters\",align:\"center\",field:\"received_bag_count\",sortable:!0},{name:\"received_item_count\",label:\"Received Items\",align:\"center\",field:\"received_item_count\",sortable:!0},{name:\"date\",label:\"Date\",align:\"center\",field:\"date\",sortable:!0},{name:\"status\",label:\"Status\",align:\"center\",field:\"status\",sortable:!0}]),c()(e,\"columns1\",[{name:\"cartonNumber\",required:!0,label:\"Carton Number\",align:\"center\",field:\"cartonNumber\",sortable:!0,descending:!1},{name:\"itemNumber\",label:\"item Number\",align:\"center\",field:\"itemNumber\",sortable:!0},{name:\"status\",label:\"Status\",align:\"center\",field:\"status\",sortable:!0}]),c()(e,\"locationDropDown\",[]),c()(e,\"Source\",\"\"),e},methods:{convertDate:function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate(),s=t.getFullYear();n<10&&(n=\"0\"+n),a<10&&(a=\"0\"+a);var r=n+\"-\"+a+\"-\"+s;return r},navigateToReport:function(e){var t=this;t.tableData1=[],t.loading=!0,t.barcodePdfShowModal=!0,t.stNumber=e.name,v.a.get(baseUrlForBackend+\"/stn/getitems?stn=\"+t.stNumber).then(function(e){t.tableData1=[],t.loading=!1,e.data.forEach(function(e){t.tableData1.push({cartonNumber:e.mbag_id,itemNumber:e.item_id,status:e.status})}),t.loading=!1})},getLocations:function(e){var t=this;firebase.database().ref(\"Locations\").once(\"value\",function(a){a.forEach(function(a){e!==a.val().id&&t.locationDropDown.push({label:a.val().name,value:a.key})}),t.Source=t.locationDropDown[0].value,t.updateReceivemastersDt()})},updateReceivemastersDt:function(){var e=this;e.loading=!0,v.a.get(baseUrlForBackend+\"/stn/get?source=\"+e.Source).then(function(t){e.tableData=[],e.loading=!1,t.data.forEach(function(t){e.tableData.push({name:t.stn_number,created_by:t.created_by,destinationCode:t.destination,source:t.source,status:t.status,totalBags:t.no_of_bags,totalItems:t.no_of_items,vehicleNo:t.vehicle_no,uploaded_cartons:t.no_of_bags,date:t.created_at,type:t.type,received_bag_count:t.bags_received,received_item_count:t.items_received})}),e.tableData=e.tableData.sort(function(e,t){return new Date(t.date)-new Date(e.date)})})},rowClick:function(e){var t=this;if(console.log(e),\"Scan Pending\"!=e.status)t.currentStn=e,t.stnNumber=e.name,t.currentStn.stn_number=e.name,t.eventsModal=!0;else{var a=new Audio(\"/statics/beep1.mp3\");a.play(),g[\"a\"].create({message:e.name+\"- Not Yet Dispatched\",timeout:80})}},closePopup:function(){var e=this;e.eventsModal=!1,e.stnNumber=\"dataRefresh\",e.updateReceivemastersDt(),e.mbagselected&&(e.mbagselected=0,e.closeMBag()),e.currentStn={}},getMbagDetails:function(){var e=this,t=e.scannedMBag;firebase.database().ref(\"StnMasterBagMapping/\"+t).once(\"value\",function(a){if(a.val()){var n=Object.keys(a.val())[0],s=a.val()[n].bag_src;firebase.database().ref(\"StnCartonItemData/\"+s+\"/\"+n).once(\"value\",function(a){if(a.val())if(\"Dispatched\"===a.val().status||\"Partially Received\"===a.val().status)if(a.val().destination_code===e.currentUserDetails.location_id)firebase.database().ref(\"StnCartonItemData/\"+s+\"/\"+n+\"/\"+t).once(\"value\",function(r){r.val()?\"created\"===r.val().status&&(firebase.database().ref(\"StnCartonItemData/\"+s+\"/\"+n+\"/\"+t+\"/status\").set(\"open\"),firebase.database().ref(\"StnCartonItemData/\"+s+\"/\"+n+\"/received_bag_count\").set(a.val().received_bag_count?a.val().received_bag_count+1:1),e.currentStn.received_bag_count=a.val().received_bag_count?a.val().received_bag_count+1:1,e.currentStn.expmasters=e.currentStn.expmasters-1):(firebase.database().ref(\"StnCartonItemData/\"+s+\"/\"+n+\"/\"+t+\"/status\").set(\"open\"),firebase.database().ref(\"StnCartonItemData/\"+s+\"/\"+n+\"/received_bag_count\").set(a.val().received_bag_count?a.val().received_bag_count+1:1),e.currentStn.received_bag_count=a.val().received_bag_count?a.val().received_bag_count+1:1,e.currentStn.expmasters=e.currentStn.expmasters-1)}),e.scanBagAlone?(g[\"a\"].create({message:e.scannedMBag+\"has been received\",position:\"center\",timeout:80,type:\"positive\",color:\"positive\",textColor:\"black\"}),e.scannedMBag=\"\"):(e.mbagselected=1,e.currentStn.Source=s,e.currentStn.MasterBag=t,setTimeout(function(){e.$refs.scannedItem.focus()},200));else{var r=new Audio(\"/statics/beep1.mp3\");r.play(),g[\"a\"].create({message:\"This Carton is meant for location \"+a.val().destination_code,position:\"center\",timeout:80}),e.$refs.scannedMBag.focus()}else{var c=new Audio(\"/statics/beep1.mp3\");c.play(),g[\"a\"].create({message:\"Current Status :\"+a.val().status,position:\"center\",timeout:80}),e.$refs.scannedMBag.focus()}})}else{var r=new Audio(\"/statics/beep1.mp3\");r.play(),g[\"a\"].create({message:\"Invalid Carton ID\",position:\"center\",timeout:80}),e.$refs.scannedMBag.focus()}})},showBarcodePdfInIframe:function(e){var t=this;t.eventsModal=!1,t.barcodePdfShowModal=!0,t.pdfUrl=e},closeBarcodePdfIframe:function(){var e=this;e.barcodePdfShowModal=!1},receiveItem:function(){var e=this,t=e.scannedItem;firebase.database(app2).ref(\"MasterBagItemMapping/\"+e.currentStn.stn_number+\"/\"+e.currentStn.MasterBag+\"/item_code/\"+t).once(\"value\",function(a){if(a.val())if(\"received\"===a.val().status){var n=new Audio(\"/statics/beep1.mp3\");n.play(),g[\"a\"].create({message:\"Item Already Received\",position:\"center\",timeout:80}),firebase.database().ref(\"RtoandReturns/\"+t+\"/stn\").set(null),firebase.database().ref(\"RtoandReturns/\"+t+\"/mbag\").set(null)}else firebase.database(app2).ref(\"MasterBagItemMapping/\"+e.currentStn.stn_number+\"/\"+e.currentStn.MasterBag+\"/item_code/\"+t).update({status:\"received\",received_by:e.$store.state.example.userName,received_at:new Date}),e.currentStn.received_item_count+=1,e.currentStn.totalItems===e.currentStn.received_item_count?firebase.database(app2).ref(\"StnCartonItemData/\"+e.currentStn.Source+\"/\"+e.currentStn.stn_number+\"/status\").set(\"Received\"):firebase.database(app2).ref(\"StnCartonItemData/\"+e.currentStn.Source+\"/\"+e.currentStn.stn_number+\"/status\").set(\"Partially Received\"),firebase.database(app2).ref(\"StnCartonItemData/\"+e.currentStn.Source+\"/\"+e.currentStn.stn_number+\"/received_item_count\").set(e.currentStn.received_item_count),e.currentStn.expItems=e.currentStn.expItems-1,firebase.database().ref(\"RtoandReturns/\"+t+\"/stn\").set(null),firebase.database().ref(\"RtoandReturns/\"+t+\"/mbag\").set(null);else{var s=new Audio(\"/statics/beep1.mp3\");s.play(),g[\"a\"].create({message:\"Item Not Found\",position:\"center\",timeout:80})}}),setTimeout(function(){e.scannedItem=\"\"},600)},closeMBag:function(){var e=this,t=e.currentStn.stn_number,a=e.currentStn.MasterBag,n=e.currentStn.Source;firebase.database().ref(\"MasterBagItemMapping/\"+t+\"/\"+a+\"/item_code\").once(\"value\",function(s){var r=s.numChildren(),c=0,o=\"\";s.forEach(function(e){\"received\"===e.val().status&&(c+=1)}),o=r===c?\"closed\":\"open\",firebase.database().ref(\"StnCartonItemData/\"+n+\"/\"+t+\"/\"+a+\"/status\").set(o),e.scannedItem=\"\",e.scannedMBag=\"\",e.mbagselected=0})},toggleBagScan:function(){this.firsttoggle&&(this.firsttoggle=0,this.scanBagAlone=!this.scanBagAlone),this.$refs.scannedMBag.focus()}}},S=_,h=(a(\"6da2\"),a(\"2877\")),I=Object(h[\"a\"])(S,n,s,!1,null,null,null);I.options.__file=\"receivedStn.vue\";t[\"default\"]=I.exports},\"548c\":function(e,t,a){},\"6da2\":function(e,t,a){\"use strict\";var n=a(\"548c\"),s=a.n(n);s.a},7259:function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"About\"},[a(\"div\",{staticClass:\"row\",attrs:{align:\"center\"}},[a(\"div\",{staticClass:\"col-lg-12 col-md-12 col-sm-12 col-xs-12\"},[e.locationLoader?e._e():a(\"span\",{staticClass:\"text-positive q-ml-md scannedItemLocation\",class:e.colorOfItemLocation},[e._v(e._s(e.currentScannedItemLocation))]),!e.locationLoader&&e.errorMsg?a(\"span\",{staticClass:\"text-negative q-ml-md text-center scannedItemError\"},[e._v(\"Item Received, Segregation Data Not Available\")]):e._e(),e.locationLoader?a(\"q-spinner\",{staticStyle:{margin:\"0 auto\"},attrs:{color:\"green\",size:\"40px\"}}):e._e()],1)]),a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"}),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"},[a(\"q-toggle\",{attrs:{label:\"Scan Bag Only\"},on:{input:e.toggleBagScan},model:{value:e.scanBagAlone,callback:function(t){e.scanBagAlone=t},expression:\"scanBagAlone\"}}),a(\"q-toggle\",{staticStyle:{\"margin-left\":\"5px\"},attrs:{label:\"Scan Item Only\"},on:{input:e.toggleItemScan},model:{value:e.scanItemAlone,callback:function(t){e.scanItemAlone=t},expression:\"scanItemAlone\"}})],1),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"})]),a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"}),e.mbagselected||e.scanItemAlone?e._e():a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"},[a(\"q-field\",[a(\"q-input\",{ref:\"scannedMBag\",attrs:{type:\"text\",pattern:\"\\\\d*\",\"float-label\":\"Scan Master Bag *\"},on:{keyup:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.getMbagDetails(t):null}},model:{value:e.scannedMBag,callback:function(t){e.scannedMBag=t},expression:\"scannedMBag\"}})],1)],1),e.mbagselected||e.scanItemAlone?a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"},[a(\"q-field\",[a(\"q-input\",{ref:\"scannedItem\",attrs:{type:\"text\",\"float-label\":\"Scan Item Id / Packet Id *\"},on:{keyup:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.receiveItem(t):null}},model:{value:e.scannedItem,callback:function(t){e.scannedItem=t},expression:\"scannedItem\"}})],1),e.scanItemAlone?e._e():a(\"q-btn\",{staticStyle:{width:\"100%\",\"margin-bottom\":\"2px\"},attrs:{label:\"Close Master Bag\"},on:{click:e.closeMBag}})],1):e._e(),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12\"})]),e.mbagselected?a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"}),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"},[a(\"table\",{staticClass:\"q-table\"},[a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Received Master Bags / Total:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.currentStn.received_bag_count)+\"/\"),a(\"span\",[e._v(e._s(e.currentStn.no_of_bags))])])]),a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Received Items / Total:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.receivedItems)+\"/\"),a(\"span\",[e._v(e._s(e.currentStn.no_of_items))])])]),e.currentStn?a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Current STN:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.currentStn.stn_number))])]):e._e(),e.currentStn.MasterBag?a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Current Bag:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.currentStn.MasterBag))])]):e._e(),e.currentStn.MasterBag?a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Created By:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.currentStn.created_by))])]):e._e()])]),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"})]):e._e()])},s=[];n._withStripped=!0;a(\"ac6a\");var r=a(\"7037\"),c=a.n(r),o=(a(\"6762\"),a(\"bc3a\")),i=a.n(o),l=a(\"bc9b\"),d=a(\"c604\"),u=a(\"62a9\"),m=a(\"66d7\"),f=a(\"7b38\"),b=a(\"53fe\"),v=a(\"0952\"),g=a(\"7646\"),p=a(\"6580\"),_=a(\"5931\"),S=a(\"2f48\"),h=a(\"6186\"),I=a(\"7051\"),C=a(\"2a70\"),y=a(\"133b\"),B=a(\"206e\"),M={props:{stnNumber:{type:String,required:!0}},name:\"rtoReturns\",components:{QTable:d[\"a\"],QTh:u[\"a\"],QTr:m[\"a\"],QTd:f[\"a\"],QTableColumns:b[\"a\"],QModal:v[\"a\"],QCard:g[\"a\"],QCardTitle:p[\"a\"],QSelect:_[\"a\"],QUploader:S[\"a\"],QSearch:h[\"a\"],QLayout:I[\"a\"],QModalLayout:C[\"a\"],QToggle:l[\"a\"],Notify:y[\"a\"],QInnerLoading:B[\"a\"]},data:function(){return{typeOptions:[{label:\"RTO\",value:\"RTO\"},{label:\"Returns\",value:\"Returns\"}],modelType:\"RTO\",scanLabel:\"Scan Packet *\",locationLoader:!1,currentScannedItemLocation:\"\",scannedItem:\"\",rowStnNumber:\"\",scannedMBag:\"\",scanBagAlone:0,mbagselected:0,receivedItems:0,firsttoggle:1,pageLoading:!0,errorMsg:!1,colorOfItemLocation:\"\",tempcurrentScannedItemLocation:\"\",tempColorDict:{},currentStn:{},firstItemtoggle:1,scanItemAlone:0}},mounted:function(){var e=this;e.$refs.scannedMBag.focus(),firebase.auth().onAuthStateChanged(function(t){t?firebase.database(app2).ref(\"UserDetails/\"+t.uid).once(\"value\",function(t){e.currentUserDetails=t.val()}):e.$router.push(\"/\")}),e.pageLoading=!1},created:function(){var e=this;setTimeout(function(){e.$refs.scannedMBag.focus()},200)},watch:{stnNumber:function(e){var t=this;t.rowStnNumber=e,\"refreshcondition\"===e&&(t.scannedItem=\"\",t.scannedMBag=\"\",t.mbagselected=\"\",t.scanItemAlone=\"\",t.errorMsg=\"\"),\"refreshcondition\"!=t.rowStnNumber&&setTimeout(function(){t.$refs.scannedMBag.focus()},200),0!=t.scanItemAlone&&0!=t.scanItemAlone||(t.scannedItem=\"\",t.scannedMBag=\"\",t.mbagselected=\"\",t.scanItemAlone=\"\",t.errorMsg=\"\")}},methods:{getMbagDetails:function(){var e=this,t=[\"Dispatched\",\"Partially Received\",\"open\",\"closed\"],a={mbag:this.scannedMBag,user_obj:e.currentUserDetails};i.a.post(baseUrlForBackend+\"/stn/mbag/receive\",a).then(function(a){if(e.rowStnNumber===a.data.stn_number)if(t.includes(a.data.status))e.scanBagAlone?(y[\"a\"].create({message:e.scannedMBag+\"has been received\",position:\"center\",timeout:80,type:\"positive\",color:\"positive\",textColor:\"black\"}),e.scannedMBag=\"\"):(e.mbagselected=1,e.currentStn=a.data,e.currentStn.Source=a.data.source,e.currentStn.received_bag_count=a.data.bags_received,e.currentStn.received_item_count=a.data.items_received,e.receivedItems=a.data.items_received,e.currentStn.MasterBag=e.scannedMBag,setTimeout(function(){e.$refs.scannedItem.focus()},200));else{var n=new Audio(\"/statics/beep1.mp3\");n.play(),y[\"a\"].create({message:\"Current Status: \"+a.data.status,position:\"center\",timeout:80}),e.scannedMBag=\"\",e.$refs.scannedMBag.focus()}else{var s=new Audio(\"/statics/beep1.mp3\");s.play(),y[\"a\"].create({message:e.scannedMBag+\"- belong to different STN\",position:\"center\",timeout:80}),e.scannedMBag=\"\",e.$refs.scannedMBag.focus()}}).catch(function(t){var a=new Audio(\"/statics/beep1.mp3\");a.play(),y[\"a\"].create({message:\"Invalid Carton ID\",position:\"center\",timeout:80}),e.scannedMBag=\"\",e.$refs.scannedMBag.focus()})},getDetails:function(){var e=this;e.locationLoader=!0;var t=e.scannedItem,a={item:t,source:e.Source,user_obj:e.currentUserDetails};i.a.post(baseUrlForBackend+\"/stn/item/details\",a).then(function(t){e.currentScannedItemLocation=t.data.location,e.errorMsg=!1,e.locationLoader=!1,e.scannedItem=\"\",e.$refs.scannedItem.focus()}).catch(function(t){e.errorMsg=!0,e.locationLoader=!1,e.scannedItem=\"\",e.$refs.scannedItem.focus()})},receiveItem:function(){var e=this,t=e.scannedItem;if(e.scanItemAlone)e.getDetails();else{var a={item:t,stn:e.currentStn.stn_number,user_obj:e.currentUserDetails};i.a.post(baseUrlForBackend+\"/stn/mbag/receive/item\",a).then(function(t){t.data.items_received&&(e.increaseReceiveditemCount(t.data.items_received),e.$refs.scannedItem.focus(),e.getDetails())}).catch(function(t){var a=new Audio(\"/statics/beep1.mp3\");a.play(),e.scannedItem=\"\",e.$refs.scannedItem.focus(),y[\"a\"].create({message:\"Item Not Found\",position:\"center\",timeout:80})})}},increaseReceiveditemCount:function(e){this.receivedItems=e},resiprocate:function(e){var t=this;firebase.database().ref(\"RtoandReturns/\"+e).once(\"value\",function(a){var n=a.val(),s={};s[a.key]=a.val(),s[a.key][\"received_at\"]=(new Date).getTime();var r=n.location,o=n;o.location=t.currentUserDetails.location_id;var i={};\"object\"==c()(n[\"barcode\"])?n[\"barcode\"].forEach(function(e){i[e]=o,i[e].barcode=null,i[e].received_at=(new Date).getTime()}):(i[n.barcode]=o,i[n.barcode].received_at=(new Date).getTime()),\"DC\"==r?firebase.database().ref(\"ReturnedItems/\"+e).remove():firebase.database().ref(r+\"ReturnedItems/\"+e).remove(),firebase.database().ref(o.location+\"ReturnedItems\").update(s),firebase.database().ref(\"RtoandReturns\").update(i)})},closeMBag:function(){var e=this;firebase.database(app2).ref(\"StnCartonItemData/\"+e.currentStn.source_code+\"/\"+e.currentStn.stn_number+\"/\"+e.currentStn.MasterBag+\"/item_code\").once(\"value\",function(t){var a=t.numChildren(),n=0,s=\"\";t.forEach(function(e){\"received\"===e.val().status&&(n+=1)}),s=a===n?\"closed\":\"open\";var r=e.currentStn.Source,c=e.currentStn.stn_number,o=e.currentStn.MasterBag;firebase.database(app2).ref(\"StnCartonItemData/\"+r+\"/\"+c+\"/\"+o+\"/status\").set(s),e.scannedItem=\"\",e.scannedMBag=\"\",setTimeout(function(){e.$refs.scannedMBag.focus(),e.errorMsg=!1},100),e.currentStn={},e.mbagselected=0})},toggleBagScan:function(){if(this.firsttoggle&&(this.firsttoggle=0,this.scanBagAlone=!this.scanBagAlone),!0===this.scanBagAlone){this.scanItemAlone=!1;var e=this;setTimeout(function(){e.$refs.scannedMBag.focus()},500)}this.$refs.scannedMBag.focus()},toggleItemScan:function(){this.firstItemtoggle&&(this.firstItemtoggle=0,this.scanItemAlone=!this.scanItemAlone);var e=this;setTimeout(function(){e.scanItemAlone?e.$refs.scannedItem.focus():e.$refs.scannedMBag.focus()},500)}}},w=M,k=a(\"2877\"),x=Object(k[\"a\"])(w,n,s,!1,null,null,null);x.options.__file=\"receiveRto.vue\";t[\"default\"]=x.exports}}]);","extractedComments":[]}