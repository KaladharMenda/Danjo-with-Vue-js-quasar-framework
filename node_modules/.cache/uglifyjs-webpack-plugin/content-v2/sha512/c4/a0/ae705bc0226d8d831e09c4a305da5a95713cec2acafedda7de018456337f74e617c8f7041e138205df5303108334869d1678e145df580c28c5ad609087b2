{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"2d208116\"],{a2e4:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"About\"},[a(\"q-card\",{staticClass:\"bg-white card-styl\"},[a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-12 col-md-12 col-sm-12 col-xs-12\"},[e.showTable?a(\"q-table\",{attrs:{title:e.tableTitle,data:e.tableData,loading:e.loading,filter:e.filter,columns:e.tableColumn,\"row-key\":\"name\"},scopedSlots:e._u([{key:\"top-right\",fn:function(t){return[a(\"q-search\",{staticClass:\"col-6\",attrs:{\"hide-underline\":\"\",color:\"secondary\"},model:{value:e.filter,callback:function(t){e.filter=t},expression:\"filter\"}})]}},{key:\"body\",fn:function(t){return a(\"q-tr\",{attrs:{props:t}},[a(\"q-td\",{key:\"vendor_id\",attrs:{props:t}},[e._v(e._s(t.row.vendor_id))]),a(\"q-td\",{key:\"carton_id\",attrs:{props:t}},[e._v(e._s(t.row.carton_id))]),a(\"q-td\",{key:\"id\",attrs:{props:t}},[e._v(e._s(t.row.id))]),a(\"q-td\",{key:\"status\",attrs:{props:t}},[e._v(e._s(t.row.status))]),a(\"q-td\",[\"Complete\"===t.row.status?a(\"q-btn\",{staticClass:\"q-mr-xs\",attrs:{color:\"secondary\"},on:{click:function(a){e.openUrl(t.row.url)}}},[e._v(\"Get Gp\")]):e._e(),a(\"q-btn\",{staticClass:\"q-mr-xs\",attrs:{color:\"secondary\",icon:\"info\"},on:{click:function(a){e.gpActionDeatilsInfo(t.row)}}})],1)],1)}}])}):e._e()],1),a(\"q-modal\",{attrs:{\"no-backdrop-dismiss\":\"\",\"no-esc-dismiss\":\"\",\"content-css\":{padding:\"20px\",minWidth:\"75vw\"}},model:{value:e.fileUploadModel,callback:function(t){e.fileUploadModel=t},expression:\"fileUploadModel\"}},[a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col\",attrs:{align:\"right\"}},[a(\"q-btn\",{attrs:{flat:\"\",round:\"\",dense:\"\"},on:{click:function(t){e.closePopup()}}},[e._v(\"X\")])],1)]),a(\"q-table\",{attrs:{data:e.itemsList,title:\"Items Info\",columns:e.items,color:\"black\",filter:e.filter,separator:e.separator,\"row-key\":\"name\",loading:e.loading},scopedSlots:e._u([{key:\"top-right\",fn:function(t){return[a(\"q-search\",{staticClass:\"col-12\",model:{value:e.filter,callback:function(t){e.filter=t},expression:\"filter\"}})]}},{key:\"body\",fn:function(t){return a(\"q-tr\",{staticClass:\"cursor-pointer\",attrs:{props:t}},e._l(t.cols,function(s){return a(\"q-td\",{key:s.name,attrs:{props:t}},[e._v(\"\\n            \"+e._s(s.value)+\"\\n          \")])}))}}])})],1)],1)])],1)},l=[];s._withStripped=!0;a(\"a481\");var o=a(\"7037\"),r=a.n(o),i=(a(\"cadf\"),a(\"456d\"),a(\"7f7f\"),a(\"ac6a\"),a(\"f490\")),n=a(\"bc9b\"),d=a(\"c604\"),c=a(\"62a9\"),f=a(\"66d7\"),u=a(\"7b38\"),m=a(\"53fe\"),b=a(\"0952\"),p=a(\"7646\"),v=a(\"6580\"),g=a(\"5931\"),y=a(\"2f48\"),_=a(\"6186\"),h=a(\"7051\"),w=a(\"2a70\"),D=a(\"133b\"),S=a(\"206e\"),C={components:{date:i[\"d\"],QTable:d[\"a\"],QTh:c[\"a\"],QTr:f[\"a\"],QTd:u[\"a\"],QTableColumns:m[\"a\"],QModal:b[\"a\"],QCard:p[\"a\"],QCardTitle:v[\"a\"],QSelect:g[\"a\"],QUploader:y[\"a\"],QSearch:_[\"a\"],QLayout:h[\"a\"],QModalLayout:w[\"a\"],QToggle:n[\"a\"],Notify:D[\"a\"],QInnerLoading:S[\"a\"]},data:function(){return{fromTime:\"\",toTime:\"\",totalReports:[{label:\"Detailed STN Reports\",id:\"stn_report\"}],totalReports1:[{label:\"Brief STN Reports\",id:\"stn_report1\"}],tableTitle:\"GP Details\",BagStatus:\"\",fileUploadModel:!1,sno:\"\",separator:\"cell\",tableColumn:[{name:\"vendor_id\",required:!0,label:\"Vendor Name\",align:\"left\",field:\"vendor_id\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"carton_id\",required:!0,label:\"Carton Id\",align:\"left\",field:\"carton_id\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"status\",required:!0,label:\"Status\",align:\"left\",field:\"status\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"}],items:[{name:\"ItemId\",label:\"ItemId\",align:\"center\",field:\"ItemId\",sortable:!0},{name:\"Status\",label:\"Status\",align:\"center\",field:\"Status\",sortable:!0},{name:\"error\",label:\"Error\",align:\"center\",field:\"error\",sortable:!0}],tableData:[],itemsList:[],filter:\"\",loading:!1,showTable:!1,enablegp:!1}},mounted:function(){var e=this;e.generateReport()},methods:{openUrl:function(e){window.open(e)},generateReport:function(){var e=this;e.loading=!0,e.showTable=!0,e.tableTitle=\"GP Details\",window.app2.database().ref(\"flushedCartons\").on(\"value\",function(t){e.tableData=[],t.forEach(function(t){var a=t.val().cartons;console.log(t.val().vendor.name),console.log(t.val().status);var s=\"Waiting\";0===t.val().status?s=\"Waiting\":1===t.val().status||2===t.val().status||3===t.val().status||4===t.val().status?s=\"Processing\":5===t.val().status?s=\"GP Created, Items to be added\":8===t.val().status?s=\"Retriving GP\":9===t.val().status&&(s=\"Complete\"),Object.keys(a).forEach(function(a){console.log(a),e.tableData.push({vendor_id:t.val().vendor.name,carton_id:a,status:s,id:t.val().vendor.id,items:t.val().cartons[a],url:t.val().cartons[a].gpurl})}),e.tableData.reverse()}),e.loading=!1})},gpActionDeatilsInfo:function(e){var t=this;t.fileUploadModel=!0,t.itemsList=[];var a=Object.keys(e.items),s=\"\",l=\"\";a.forEach(function(a){\"gpurl\"!==a&&(console.log(e.items[a].error_message),7===e.items[a].status?(s=\"Failed\",l=e.items[a].error_message):6===e.items[a].status?(s=\"Success\",l=\"--\"):(s=\"Not Yet Processed\",l=\"--\"),t.itemsList.push({ItemId:a,Status:s,error:l}))})},closePopup:function(){var e=this;e.fileUploadModel=!1},generateReport1:function(e){var t=this,a=firebase.database().ref(\"MasterBagItemMapping\"),s={};t.loading=!0,t.showTable=!0,t.tableTitle=\"Breif STN Details\",t.tableData=[],t.tableColumn=[{name:\"S.No\",required:!0,label:\"S.No\",align:\"left\",field:\"S.No\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"stn\",required:!0,label:\"STN Number\",align:\"left\",field:\"stn\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"carton\",required:!0,label:\"Carton ID\",align:\"left\",field:\"carton\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"No of Items\",required:!0,label:\"No of Items\",align:\"left\",field:\"No of Items\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"created_by\",required:!0,label:\"Created By\",align:\"left\",field:\"created_by\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"Destination\",required:!0,label:\"Destination\",align:\"left\",field:\"Destination\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"created_at\",required:!0,label:\"Created At\",align:\"left\",field:\"created_at\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"Bag Status\",required:!0,label:\"Bag Status\",align:\"left\",field:\"Bag Status\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"received_at\",required:!0,label:\"Received At\",align:\"left\",field:\"received_at\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"Received By\",required:!0,label:\"Received By\",align:\"left\",field:\"received_by\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"}];var l=1;a.once(\"value\",function(e){e.forEach(function(e){for(var a=e.key,o=e.val(),r=[\"BLR\",\"DEL\",\"MUM\",\"TEST\",\"DC\"],n=0;n<r.length;n++){var d=firebase.database().ref(\"StnCartonItemData/\"+r[n]+\"/\"+e.key);d.once(\"value\",function(e){void 0!=e.val()&&(s=e.val(),Object.keys(o).forEach(function(e){if(-1==[\"created\",\"stn_number\",\"master_bag_number\"].indexOf(e)){var r=Object.keys(o[e][\"item_code\"]).length;\"created\"==s[e][\"status\"]?t.BagStatus=\"Yet to Received\":t.BagStatus=\"Received\";var n=i[\"d\"].addToDate(t.toTime,{days:1});if(i[\"d\"].formatDate(s.created_at,\"YYYY-MM-DD  HH:mm:ss\")>=i[\"d\"].formatDate(t.fromTime,\"YYYY-MM-DD  HH:mm:ss\")&&i[\"d\"].formatDate(s.created_at,\"YYYY-MM-DD  HH:mm:ss\")<=i[\"d\"].formatDate(n,\"YYYY-MM-DD  HH:mm:ss\")){var d={\"S.No\":l++,stn:a,carton:e,\"No of Items\":r,created_by:s.created_by,Destination:s.destination_code,created_at:i[\"d\"].formatDate(s.created_at,\"YYYY-MM-DD  HH:mm:ss\"),\"dispatched on\":s.dispatched_on,\"Bag Status\":t.BagStatus,received_by:s[e][\"received_by\"],received_at:i[\"d\"].formatDate(s[e].received_at,\"YYYY-MM-DD  HH:mm:ss\")};t.tableData.push(d),console.log(t.BagStatus),console.log(d)}t.loading=!1}}))})}})})},downloadCsv:function(e){this.JSONToCSVConvertor(this.tableData,this.tableTitle+\"_\"+this.fromTime,1)},JSONToCSVConvertor:function(e,t,a){var s=\"object\"!=r()(e)?JSON.parse(e):e,l=\"\";if(l+=t+\"\\r\\n\\n\",a){var o=\"\";for(var i in s[0])o+=i+\",\";o=o.slice(0,-1),l+=o+\"\\r\\n\"}for(var n=0;n<s.length;n++){o=\"\";for(var i in s[n])o+='\"'+s[n][i]+'\",';o.slice(0,o.length-1),l+=o+\"\\r\\n\"}if(\"\"!=l){t.replace(/ /g,\"_\");var d=new Blob([l],{type:\"text/csv\"}),c=document.createElement(\"a\");c.setAttribute(\"href\",window.URL.createObjectURL(d)),c.setAttribute(\"download\",\"Data.csv\"),document.body.appendChild(c),c.click(),document.body.removeChild(c)}else alert(\"Invalid data\")}}},q=C,T=a(\"2877\"),k=Object(T[\"a\"])(q,s,l,!1,null,null,null);k.options.__file=\"getgp.vue\";t[\"default\"]=k.exports}}]);","extractedComments":[]}