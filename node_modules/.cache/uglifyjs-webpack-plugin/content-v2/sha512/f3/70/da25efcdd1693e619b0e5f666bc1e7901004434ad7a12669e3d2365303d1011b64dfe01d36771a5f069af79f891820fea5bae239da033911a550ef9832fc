{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"2d0d63b5\"],{7259:function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"About\"},[a(\"div\",{staticClass:\"row\",attrs:{align:\"center\"}},[a(\"div\",{staticClass:\"col-lg-12 col-md-12 col-sm-12 col-xs-12\"},[e.locationLoader?e._e():a(\"span\",{staticClass:\"text-positive q-ml-md scannedItemLocation\",class:e.colorOfItemLocation},[e._v(e._s(e.currentScannedItemLocation))]),!e.locationLoader&&e.errorMsg?a(\"span\",{staticClass:\"text-negative q-ml-md text-center scannedItemError\"},[e._v(\"Item Received, Segregation Data Not Available\")]):e._e(),e.locationLoader?a(\"q-spinner\",{staticStyle:{margin:\"0 auto\"},attrs:{color:\"green\",size:\"40px\"}}):e._e()],1)]),a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"}),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"},[a(\"q-toggle\",{attrs:{label:\"Scan Bag Only\"},on:{input:e.toggleBagScan},model:{value:e.scanBagAlone,callback:function(t){e.scanBagAlone=t},expression:\"scanBagAlone\"}}),a(\"q-toggle\",{staticStyle:{\"margin-left\":\"5px\"},attrs:{label:\"Scan Item Only\"},on:{input:e.toggleItemScan},model:{value:e.scanItemAlone,callback:function(t){e.scanItemAlone=t},expression:\"scanItemAlone\"}})],1),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"})]),a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"}),e.mbagselected||e.scanItemAlone?e._e():a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"},[a(\"q-field\",[a(\"q-input\",{ref:\"scannedMBag\",attrs:{type:\"text\",pattern:\"\\\\d*\",\"float-label\":\"Scan Master Bag *\"},on:{keyup:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.getMbagDetails(t):null}},model:{value:e.scannedMBag,callback:function(t){e.scannedMBag=t},expression:\"scannedMBag\"}})],1)],1),e.mbagselected||e.scanItemAlone?a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12 scannedItemTop\"},[a(\"q-field\",[a(\"q-input\",{ref:\"scannedItem\",attrs:{type:\"text\",\"float-label\":\"Scan Item Id / Packet Id *\"},on:{keyup:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.receiveItem(t):null}},model:{value:e.scannedItem,callback:function(t){e.scannedItem=t},expression:\"scannedItem\"}})],1),e.scanItemAlone?e._e():a(\"q-btn\",{staticStyle:{width:\"100%\",\"margin-bottom\":\"2px\"},attrs:{label:\"Close Master Bag\"},on:{click:e.closeMBag}})],1):e._e(),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-6 col-xs-12\"})]),e.mbagselected?a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"}),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"},[a(\"table\",{staticClass:\"q-table\"},[a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Received Master Bags / Total:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.currentStn.received_bag_count)+\"/\"),a(\"span\",[e._v(e._s(e.currentStn.no_of_bags))])])]),a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Received Items / Total:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.receivedItems)+\"/\"),a(\"span\",[e._v(e._s(e.currentStn.no_of_items))])])]),e.currentStn?a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Current STN:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.currentStn.stn_number))])]):e._e(),e.currentStn.MasterBag?a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Current Bag:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.currentStn.MasterBag))])]):e._e(),e.currentStn.MasterBag?a(\"tr\",[a(\"th\",{staticClass:\"text-left\"},[e._v(\"Created By:\")]),a(\"td\",{staticClass:\"text-right\"},[e._v(e._s(e.currentStn.created_by))])]):e._e()])]),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"})]):e._e()])},s=[];n._withStripped=!0;a(\"ac6a\");var c=a(\"7037\"),o=a.n(c),r=(a(\"6762\"),a(\"bc3a\")),i=a.n(r),l=a(\"bc9b\"),d=a(\"c604\"),u=a(\"62a9\"),m=a(\"66d7\"),g=a(\"7b38\"),f=a(\"53fe\"),v=a(\"0952\"),b=a(\"7646\"),p=a(\"6580\"),I=a(\"5931\"),_=a(\"2f48\"),h=a(\"6186\"),S=a(\"7051\"),B=a(\"2a70\"),C=a(\"133b\"),M=a(\"206e\"),x={props:{stnNumber:{type:String,required:!0}},name:\"rtoReturns\",components:{QTable:d[\"a\"],QTh:u[\"a\"],QTr:m[\"a\"],QTd:g[\"a\"],QTableColumns:f[\"a\"],QModal:v[\"a\"],QCard:b[\"a\"],QCardTitle:p[\"a\"],QSelect:I[\"a\"],QUploader:_[\"a\"],QSearch:h[\"a\"],QLayout:S[\"a\"],QModalLayout:B[\"a\"],QToggle:l[\"a\"],Notify:C[\"a\"],QInnerLoading:M[\"a\"]},data:function(){return{typeOptions:[{label:\"RTO\",value:\"RTO\"},{label:\"Returns\",value:\"Returns\"}],modelType:\"RTO\",scanLabel:\"Scan Packet *\",locationLoader:!1,currentScannedItemLocation:\"\",scannedItem:\"\",rowStnNumber:\"\",scannedMBag:\"\",scanBagAlone:0,mbagselected:0,receivedItems:0,firsttoggle:1,pageLoading:!0,errorMsg:!1,colorOfItemLocation:\"\",tempcurrentScannedItemLocation:\"\",tempColorDict:{},currentStn:{},firstItemtoggle:1,scanItemAlone:0}},mounted:function(){var e=this;e.$refs.scannedMBag.focus(),firebase.auth().onAuthStateChanged(function(t){t?firebase.database(app2).ref(\"UserDetails/\"+t.uid).once(\"value\",function(t){e.currentUserDetails=t.val()}):e.$router.push(\"/\")}),e.pageLoading=!1},created:function(){var e=this;setTimeout(function(){e.$refs.scannedMBag.focus()},200)},watch:{stnNumber:function(e){var t=this;t.rowStnNumber=e,\"refreshcondition\"===e&&(t.scannedItem=\"\",t.scannedMBag=\"\",t.mbagselected=\"\",t.scanItemAlone=\"\",t.errorMsg=\"\"),\"refreshcondition\"!=t.rowStnNumber&&setTimeout(function(){t.$refs.scannedMBag.focus()},200),0!=t.scanItemAlone&&0!=t.scanItemAlone||(t.scannedItem=\"\",t.scannedMBag=\"\",t.mbagselected=\"\",t.scanItemAlone=\"\",t.errorMsg=\"\")}},methods:{getMbagDetails:function(){var e=this,t=[\"Dispatched\",\"Partially Received\",\"open\",\"closed\"],a={mbag:this.scannedMBag,user_obj:e.currentUserDetails};i.a.post(baseUrlForBackend+\"/stn/mbag/receive\",a).then(function(a){if(e.rowStnNumber===a.data.stn_number)if(t.includes(a.data.status))e.scanBagAlone?(C[\"a\"].create({message:e.scannedMBag+\"has been received\",position:\"center\",timeout:80,type:\"positive\",color:\"positive\",textColor:\"black\"}),e.scannedMBag=\"\"):(e.mbagselected=1,e.currentStn=a.data,e.currentStn.Source=a.data.source,e.currentStn.received_bag_count=a.data.bags_received,e.currentStn.received_item_count=a.data.items_received,e.receivedItems=a.data.items_received,e.currentStn.MasterBag=e.scannedMBag,setTimeout(function(){e.$refs.scannedItem.focus()},200));else{var n=new Audio(\"/statics/beep1.mp3\");n.play(),C[\"a\"].create({message:\"Current Status: \"+a.data.status,position:\"center\",timeout:80}),e.scannedMBag=\"\",e.$refs.scannedMBag.focus()}else{var s=new Audio(\"/statics/beep1.mp3\");s.play(),C[\"a\"].create({message:e.scannedMBag+\"- belong to different STN\",position:\"center\",timeout:80}),e.scannedMBag=\"\",e.$refs.scannedMBag.focus()}}).catch(function(t){var a=new Audio(\"/statics/beep1.mp3\");a.play(),C[\"a\"].create({message:\"Invalid Carton ID\",position:\"center\",timeout:80}),e.scannedMBag=\"\",e.$refs.scannedMBag.focus()})},getDetails:function(){var e=this;e.locationLoader=!0;var t=e.scannedItem,a={item:t,source:e.Source,user_obj:e.currentUserDetails};i.a.post(baseUrlForBackend+\"/stn/item/details\",a).then(function(t){e.currentScannedItemLocation=t.data.location,e.errorMsg=!1,e.locationLoader=!1,e.scannedItem=\"\",e.$refs.scannedItem.focus()}).catch(function(t){e.errorMsg=!0,e.locationLoader=!1,e.scannedItem=\"\",e.$refs.scannedItem.focus()})},receiveItem:function(){var e=this,t=e.scannedItem;if(e.scanItemAlone)e.getDetails();else{var a={item:t,stn:e.currentStn.stn_number,user_obj:e.currentUserDetails};i.a.post(baseUrlForBackend+\"/stn/mbag/receive/item\",a).then(function(t){t.data.items_received&&(e.increaseReceiveditemCount(t.data.items_received),e.$refs.scannedItem.focus(),e.getDetails())}).catch(function(t){var a=new Audio(\"/statics/beep1.mp3\");a.play(),e.scannedItem=\"\",e.$refs.scannedItem.focus(),C[\"a\"].create({message:\"Item Not Found\",position:\"center\",timeout:80})})}},increaseReceiveditemCount:function(e){this.receivedItems=e},resiprocate:function(e){var t=this;firebase.database().ref(\"RtoandReturns/\"+e).once(\"value\",function(a){var n=a.val(),s={};s[a.key]=a.val(),s[a.key][\"received_at\"]=(new Date).getTime();var c=n.location,r=n;r.location=t.currentUserDetails.location_id;var i={};\"object\"==o()(n[\"barcode\"])?n[\"barcode\"].forEach(function(e){i[e]=r,i[e].barcode=null,i[e].received_at=(new Date).getTime()}):(i[n.barcode]=r,i[n.barcode].received_at=(new Date).getTime()),\"DC\"==c?firebase.database().ref(\"ReturnedItems/\"+e).remove():firebase.database().ref(c+\"ReturnedItems/\"+e).remove(),firebase.database().ref(r.location+\"ReturnedItems\").update(s),firebase.database().ref(\"RtoandReturns\").update(i)})},closeMBag:function(){var e=this;firebase.database(app2).ref(\"StnCartonItemData/\"+e.currentStn.source_code+\"/\"+e.currentStn.stn_number+\"/\"+e.currentStn.MasterBag+\"/item_code\").once(\"value\",function(t){var a=t.numChildren(),n=0,s=\"\";t.forEach(function(e){\"received\"===e.val().status&&(n+=1)}),s=a===n?\"closed\":\"open\";var c=e.currentStn.Source,o=e.currentStn.stn_number,r=e.currentStn.MasterBag;firebase.database(app2).ref(\"StnCartonItemData/\"+c+\"/\"+o+\"/\"+r+\"/status\").set(s),e.scannedItem=\"\",e.scannedMBag=\"\",setTimeout(function(){e.$refs.scannedMBag.focus(),e.errorMsg=!1},100),e.currentStn={},e.mbagselected=0})},toggleBagScan:function(){if(this.firsttoggle&&(this.firsttoggle=0,this.scanBagAlone=!this.scanBagAlone),!0===this.scanBagAlone){this.scanItemAlone=!1;var e=this;setTimeout(function(){e.$refs.scannedMBag.focus()},500)}this.$refs.scannedMBag.focus()},toggleItemScan:function(){this.firstItemtoggle&&(this.firstItemtoggle=0,this.scanItemAlone=!this.scanItemAlone);var e=this;setTimeout(function(){e.scanItemAlone?e.$refs.scannedItem.focus():e.$refs.scannedMBag.focus()},500)}}},A=x,T=a(\"2877\"),y=Object(T[\"a\"])(A,n,s,!1,null,null,null);y.options.__file=\"receiveRto.vue\";t[\"default\"]=y.exports}}]);","extractedComments":[]}