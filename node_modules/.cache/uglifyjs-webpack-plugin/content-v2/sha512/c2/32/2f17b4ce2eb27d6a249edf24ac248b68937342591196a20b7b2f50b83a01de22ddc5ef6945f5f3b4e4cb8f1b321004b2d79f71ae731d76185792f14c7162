{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"253989b5\"],{\"0628\":function(t,e,a){},\"1f19\":function(t,e,a){\"use strict\";var o=a(\"0628\"),n=a.n(o);n.a},ffd9:function(t,e,a){\"use strict\";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"About\"},[a(\"q-card\",{staticClass:\"bg-white card-styl\"},[a(\"div\",{staticClass:\"row\"},[a(\"div\",[a(\"i\",{staticClass:\"material-icons\",staticStyle:{\"font-size\":\"30px\"}},[a(\"strong\",[a(\"a\",{staticClass:\"floating-left\",attrs:{href:\"javascript:void(0)\"},on:{click:function(e){t.backtoCreateStn()}}},[t._v(\"\\n           keyboard_backspace\\n         \")])])])])]),a(\"div\",{staticClass:\"carton-items-data\"},[a(\"q-table\",{attrs:{data:t.cartonsList,title:\"Cartons Info\",columns:t.columns,color:\"black\",filter:t.filter,separator:t.separator,\"row-key\":\"name\",loading:t.loading},scopedSlots:t._u([{key:\"top-right\",fn:function(e){return[a(\"q-search\",{staticClass:\"col-12\",model:{value:t.filter,callback:function(e){t.filter=e},expression:\"filter\"}})]}},{key:\"body\",fn:function(e){return a(\"q-tr\",{staticClass:\"cursor-pointer\",attrs:{props:e},nativeOn:{click:function(a){t.rowClick(e.row)}}},t._l(e.cols,function(o){return a(\"q-td\",{key:o.name,attrs:{props:e}},[t._v(\"\\n          \"+t._s(o.value)+\"\\n        \")])}))}}])})],1),a(\"q-modal\",{attrs:{\"no-backdrop-dismiss\":\"\",\"no-esc-dismiss\":\"\",\"content-css\":{padding:\"20px\",minWidth:\"75vw\"}},model:{value:t.fileUploadModel,callback:function(e){t.fileUploadModel=e},expression:\"fileUploadModel\"}},[a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col\",attrs:{align:\"right\"}},[a(\"q-btn\",{attrs:{flat:\"\",round:\"\",dense:\"\"},on:{click:function(e){t.closePopup()}}},[t._v(\"X\")])],1)]),a(\"q-table\",{attrs:{data:t.itemsList,title:\"Items Info\",columns:t.items,color:\"black\",filter:t.filter,separator:t.separator,\"row-key\":\"name\",loading:t.loading},scopedSlots:t._u([{key:\"top-right\",fn:function(e){return[a(\"q-search\",{staticClass:\"col-12\",model:{value:t.filter,callback:function(e){t.filter=e},expression:\"filter\"}})]}},{key:\"body\",fn:function(e){return a(\"q-tr\",{staticClass:\"cursor-pointer\",attrs:{props:e}},[t._l(e.cols,function(o){return a(\"q-td\",{key:o.name,attrs:{props:e}},[t._v(\"\\n          \"+t._s(o.value)+\"\\n        \")])}),a(\"q-td\",[a(\"q-btn\",{attrs:{round:\"\",color:\"red\",icon:\"delete\"},on:{click:function(a){t.deleteItem(e.row.ItemId)}}})],1)],2)}}])})],1)],1)],1)},n=[];o._withStripped=!0;var s=a(\"7037\"),r=a.n(s),l=(a(\"ac6a\"),a(\"2ef0\"),a(\"c604\")),i=a(\"62a9\"),c=a(\"66d7\"),u=a(\"7b38\"),m=a(\"53fe\"),d=a(\"0952\"),f=a(\"7646\"),p=a(\"6580\"),b=a(\"5931\"),S=a(\"2f48\"),v=a(\"6186\"),I=a(\"7051\"),g=a(\"2a70\"),C=a(\"bc9b\"),h=a(\"206e\"),_={components:{QTable:l[\"a\"],QTh:i[\"a\"],QTr:c[\"a\"],QTd:u[\"a\"],QTableColumns:m[\"a\"],QModal:d[\"a\"],QCard:f[\"a\"],QCardTitle:p[\"a\"],QSelect:b[\"a\"],QUploader:S[\"a\"],QSearch:v[\"a\"],QLayout:I[\"a\"],QModalLayout:g[\"a\"],QToggle:C[\"a\"],QInnerLoading:h[\"a\"]},data:function(){return{separator:\"cell\",filter:\"\",tempStn:\"\",totalItems:\"\",valueless:!1,uploaded_items:\"\",currentsource:\"\",totalBags:\"\",uploaded_cartons:\"\",tempcatonNo:\"\",tempcartonno1:\"\",itemsList:[],loading:!1,stNumber:\"\",fileUploadModel:!1,cartonsList:[],columns:[{name:\"carton_number\",label:\"Carton Number\",align:\"center\",field:\"carton_number\",sortable:!0},{name:\"ItemsCount\",label:\"Items Count\",align:\"center\",field:\"ItemsCount\",sortable:!0}],items:[{name:\"ItemId\",label:\"ItemId\",align:\"center\",field:\"ItemId\",sortable:!0},{name:\"Status\",label:\"Status\",align:\"center\",field:\"Status\",sortable:!0}]}},mounted:function(){},created:function(){var t=this,e=t.$route.params.stNo;t.stNumber=e,firebase.auth().onAuthStateChanged(function(e){e?firebase.database(app2).ref(\"UserDetails\").once(\"value\",function(a){a.forEach(function(a){e.uid==a.key&&a.val()&&(t.user=a.val(),t.Source=t.user.location_id,console.log(t.user))})}):t.$router.push(\"/\")}),setTimeout(function(){t.getCartonItemDetails(e,t.Source)},1e3)},methods:{getCartonItemDetails:function(t,e){var a=this;a.tempStn=t,a.loading=!0,a.cartonsList=[],firebase.database(app2).ref(\"StnCartonItemData/\"+a.Source+\"/\"+t).once(\"value\",function(t){t.forEach(function(t){\"object\"===r()(t.val())&&a.cartonsList.push({carton_number:t.key,ItemsCount:t.val().totalItems})}),a.loading=!1})},rowClick:function(t){var e=this;if(0==t.ItemsCount)e.deleteItem1(t);else{e=this;e.fileUploadModel=!0,e.tempcatonNo=t.carton_number,e.deleteItemsFun(t.carton_number)}},deleteItemsFun:function(t){var e=this;e.itemsList=[],console.log(e.Source),console.log(e.tempStn),console.log(t),firebase.database(app2).ref(\"StnCartonItemData/\"+e.Source+\"/\"+e.tempStn+\"/\"+t+\"/item_code\").once(\"value\",function(t){t.forEach(function(t){console.log(t.val()),e.itemsList.push({ItemId:t.val().ItemID,Status:t.val().status})})})},closePopup:function(){var t=this;t.fileUploadModel=!1},deleteItem:function(t){var e=this,a=this;console.log(a.Source),console.log(t),console.log(a.tempcatonNo),console.log(a.tempStn),a.tempcartonno1=a.tempcatonNo,swal({title:\"Are you sure?\",text:\"Going to Delete This Item : \"+t,icon:\"warning\",buttons:!0,dangerMode:!0}).then(function(a){var o=e;a?(firebase.database(app2).ref(\"StnCartonItemData/\"+o.Source+\"/\"+o.tempStn+\"/\"+o.tempcatonNo+\"/item_code/\"+t).remove(),firebase.database().ref(\"RtoandReturns/\"+t+\"/mbag\").remove(),firebase.database().ref(\"RtoandReturns/\"+t+\"/stn\").remove(),firebase.database(app2).ref(\"StnCartonItemData/\"+o.Source+\"/\"+o.tempStn+\"/\"+o.tempcatonNo+\"/totalItems\").once(\"value\",function(t){var e=t.val()-1;firebase.database(app2).ref(\"StnCartonItemData/\"+o.Source+\"/\"+o.tempStn+\"/\"+o.tempcatonNo+\"/totalItems\").set(e)}),firebase.database(app2).ref(\"StnCartonItemData/\"+o.Source+\"/\"+o.tempStn).once(\"value\",function(t){o.totalItems=t.val().totalItems-1,o.uploaded_items=t.val().uploaded_items-1}),setTimeout(function(){firebase.database(app2).ref(\"StnCartonItemData/\"+o.Source+\"/\"+o.tempStn+\"/totalItems\").set(o.totalItems),firebase.database(app2).ref(\"StnCartonItemData/\"+o.Source+\"/\"+o.tempStn+\"/uploaded_items\").set(o.uploaded_items)},500),swal(\"Poof !    \"+t+\"  Your Item deleted!\",{icon:\"success\"}),o.deleteItemsFun(o.tempcartonno1),o.getCartonItemDetails(o.tempStn,o.Source)):swal(\"Your Item is safe :   \"+t)})},deleteItem1:function(t){var e=this,a=this;0==t.ItemsCount&&(a.fileUploadModel=!1,console.log(t),console.log(a.tempStn),a.tempcartonno1=t.carton_number,swal({title:\"Are you sure?\",text:\"Going to Delete This Carton : \"+a.tempcartonno1,icon:\"warning\",buttons:!0,dangerMode:!0}).then(function(t){var a=e;t?(firebase.database(app2).ref(\"StnCartonItemData/\"+a.Source+\"/\"+a.tempStn+\"/\"+a.tempcartonno1).remove(),firebase.database(app2).ref(\"StnMasterBagMapping/\"+a.tempcartonno1).remove(),firebase.database(app2).ref(\"StnCartonItemData/\"+a.Source+\"/\"+a.tempStn).once(\"value\",function(t){a.totalBags=t.val().totalBags-1}),setTimeout(function(){firebase.database(app2).ref(\"StnCartonItemData/\"+a.Source+\"/\"+a.tempStn+\"/totalBags\").set(a.totalBags)},500),swal(\"Poof !    \"+a.tempcartonno1+\"  Your Carton deleted!\",{icon:\"success\"}),a.getCartonItemDetails(a.tempStn,a.Source)):swal(\"Your Carton is safe :   \"+a.tempcartonno1)}))},backtoCreateStn:function(){this.$router.push(\"../../createStn\")}}},k=_,w=(a(\"1f19\"),a(\"2877\")),y=Object(w[\"a\"])(k,o,n,!1,null,null,null);y.options.__file=\"stncartoninfo.vue\";e[\"default\"]=y.exports}}]);","extractedComments":[]}