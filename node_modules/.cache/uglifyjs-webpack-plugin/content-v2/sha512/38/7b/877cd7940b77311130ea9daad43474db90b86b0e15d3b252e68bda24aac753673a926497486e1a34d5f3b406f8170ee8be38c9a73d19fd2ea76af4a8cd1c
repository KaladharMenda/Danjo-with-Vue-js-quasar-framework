{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"482f7522\"],{\"0d90\":function(t,e,a){\"use strict\";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"Picking\"},[a(\"q-card\",{staticClass:\"bg-white card-styl\"},[t.pageLoading?t._e():a(\"div\",{staticClass:\"loader\"},[a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-12 col-md-12 col-sm-12 col-xs-12\"},[a(\"h3\",{staticClass:\"inner_head_styl\"},[t._v(\"Flush\")])])]),a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-12 col-md-12 col-sm-12 col-xs-12 pull-right\"},[a(\"q-btn\",{attrs:{label:\"GET GP\"},on:{click:function(e){t.$router.push(\"/admin/getgp\")}}})],1)]),a(\"div\",{staticClass:\"row gutter-md\"},[a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-4 col-xs-12\"},[a(\"q-select\",{attrs:{\"float-label\":\"Select Bin Type\",options:t.cartonTypeOptions},on:{input:function(e){t.getVendorForBinType()}},model:{value:t.cartonType,callback:function(e){t.cartonType=e},expression:\"cartonType\"}})],1),t.vendorIdOptionList.length&&!t.cartonTypeLoading?a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-4 col-xs-12\"},[\"A\"===t.cartonType&&t.vendorIdOptionList?a(\"div\",[a(\"q-select\",{attrs:{filter:\"\",\"float-label\":\"Select Vendor\",options:t.vendorIdOptionList},on:{input:function(e){t.getVendorItems()}},model:{value:t.vendorId,callback:function(e){t.vendorId=e},expression:\"vendorId\"}})],1):t._e(),\"B\"===t.cartonType&&t.vendorIdOptionList?a(\"div\",[a(\"q-select\",{attrs:{filter:\"\",\"float-label\":\"Select Vendor\",options:t.vendorIdOptionList},on:{input:function(e){t.getVendorItems()}},model:{value:t.vendorId,callback:function(e){t.vendorId=e},expression:\"vendorId\"}})],1):t._e()]):t._e(),t.cartonTypeLoading?a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-4 col-xs-12\"},[t.cartonTypeLoading?a(\"q-spinner\",{attrs:{color:\"green\",size:\"40px\"}}):t._e()],1):t._e(),t.cartonTypeLoading||t.vendorIdOptionList.length||!t.cartonType?t._e():a(\"div\",{staticClass:\"col-lg-8 col-md-8 col-sm-8 col-xs-12\"},[a(\"h5\",{staticClass:\"text-center text-negative\"},[t._v(\"No Vendors for Type \"+t._s(t.cartonType))])]),\"A\"==t.cartonType&&t.vendorId?a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-4 col-xs-12\"},[a(\"q-field\",[a(\"q-input\",{ref:\"scanCarton\",attrs:{type:\"text\",\"float-label\":\"Scan to Flush Carton\"},on:{keyup:function(e){t.pickACarton({carton_id:t.scanCarton})}},model:{value:t.scanCarton,callback:function(e){t.scanCarton=e},expression:\"scanCarton\"}})],1)],1):t._e(),\"B\"==t.cartonType&&t.vendorId?a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-4 col-xs-12\"},[a(\"q-field\",[a(\"q-input\",{ref:\"scanCarton\",attrs:{type:\"text\",\"float-label\":\"Scan to Flush Carton\"},on:{keyup:function(e){t.pickBCarton({carton_id:t.scanCarton})}},model:{value:t.scanCarton,callback:function(e){t.scanCarton=e},expression:\"scanCarton\"}})],1)],1):t._e()]),t.vendorId?a(\"div\",{staticClass:\"row q-mt-md\"},[a(\"q-tabs\",{staticClass:\"col-lg-12 col-md-12 col-sm-12 col-xs-12\",attrs:{color:\"grey\",\"text-color\":\"white\"}},[\"A\"==t.cartonType?a(\"q-tab\",{attrs:{slot:\"title\",default:\"\",label:\"Flush Cartons A\",name:\"tab-4\"},slot:\"title\"}):t._e(),\"A\"==t.cartonType?a(\"q-tab\",{attrs:{slot:\"title\",label:\"Last Flushed A Cartons\",name:\"tab-3\"},slot:\"title\"}):t._e(),\"B\"==t.cartonType?a(\"q-tab\",{attrs:{slot:\"title\",default:\"\",label:\"Flush Cartons B\",name:\"tab-1\"},slot:\"title\"}):t._e(),\"B\"==t.cartonType?a(\"q-tab\",{attrs:{slot:\"title\",name:\"tab-2\",label:\"Last Flushed B Cartons\"},slot:\"title\"}):t._e(),\"B\"==t.cartonType?a(\"q-tab-pane\",{attrs:{name:\"tab-1\"}},[a(\"q-table\",{attrs:{title:\"Flush Cartons B\",data:t.picklistDataB,loading:t.loading,columns:t.picklistA,\"row-key\":\"name\"},scopedSlots:t._u([{key:\"header\",fn:function(e){return a(\"q-tr\",{attrs:{props:e}},t._l(e.cols,function(o){return a(\"q-th\",{key:o.name,attrs:{props:e}},[\" \"===o.label?a(\"div\",[a(\"q-btn\",{staticClass:\"otp_send\",attrs:{color:\"secondary\",disabled:t.btnLoading},on:{click:t.generateBarcodePdfB}},[t.btnLoading?a(\"q-spinner-hourglass\",{staticClass:\"on-left\"}):t._e(),a(\"span\",{staticClass:\"otp_fs\"},[t._v(\"Print Barcodes\")])],1)],1):t._e(),t._v(\"\\n                  \"+t._s(o.label)+\"\\n                \")])}))}},{key:\"body\",fn:function(e){return a(\"q-tr\",{attrs:{props:e}},[a(\"q-td\",{key:\"quantity\",attrs:{props:e}},[a(\"q-btn\",{attrs:{color:\"secondary\",label:\"Flush Carton\"},on:{click:function(a){t.pickBCarton(e.row)}}})],1),a(\"q-td\",{key:\"carton_id\",attrs:{props:e}},[t._v(t._s(e.row.carton_id))]),a(\"q-td\",{key:\"quantity\",attrs:{props:e}},[t._v(t._s(e.row.quantity))])],1)}}])})],1):t._e(),\"B\"==t.cartonType?a(\"q-tab-pane\",{attrs:{name:\"tab-2\"}},[a(\"q-table\",{attrs:{loading:t.loading,title:\"Last Flushed B Cartons\",data:t.pickedCartonsDataB,columns:t.picklistA,\"row-key\":\"name\"},scopedSlots:t._u([{key:\"body\",fn:function(e){return a(\"q-tr\",{attrs:{props:e}},[a(\"q-td\",{key:\"carton_id\",attrs:{props:e}},[t._v(t._s(e.row.carton_id))]),a(\"q-td\",{key:\"quantity\",attrs:{props:e}},[t._v(t._s(e.row.quantity))]),a(\"q-td\",{key:\"carton_status\",attrs:{props:e}},[t._v(\"Flushed\")]),a(\"q-td\",{key:\"created_at\",attrs:{props:e}},[t._v(t._s(e.row.created_at))])],1)}}])})],1):t._e(),\"A\"==t.cartonType?a(\"q-tab-pane\",{attrs:{name:\"tab-4\"}},[a(\"q-table\",{attrs:{loading:t.loading,title:\"Flush Cartons A\",data:t.picklistDataA,columns:t.picklistA,\"row-key\":\"carton_id\"},scopedSlots:t._u([{key:\"header\",fn:function(e){return a(\"q-tr\",{attrs:{props:e}},t._l(e.cols,function(o){return a(\"q-th\",{key:o.name,attrs:{props:e}},[\" \"===o.label?a(\"div\",[a(\"q-btn\",{staticClass:\"otp_send\",attrs:{color:\"secondary\",disabled:t.btnLoading},on:{click:t.generateBarcodePdfA}},[t.btnLoading?a(\"q-spinner-hourglass\",{staticClass:\"on-left\"}):t._e(),a(\"span\",{staticClass:\"otp_fs\"},[t._v(\"Print Barcodes\")])],1)],1):t._e(),t._v(\"\\n                \"+t._s(o.label)+\"\\n              \")])}))}},{key:\"body\",fn:function(e){return a(\"q-tr\",{attrs:{props:e}},[a(\"q-td\",{key:\"quantity\",attrs:{props:e}},[a(\"q-btn\",{staticClass:\"otp_send\",attrs:{color:\"secondary\",disabled:t.cartonBtnLoading},on:{click:function(a){t.pickACarton(e.row)}}},[t.cartonBtnLoading?a(\"q-spinner-hourglass\",{staticClass:\"on-left\"}):t._e(),a(\"span\",{staticClass:\"otp_fs\"},[t._v(\"Flush Carton\")])],1)],1),a(\"q-td\",{key:\"carton_id\",attrs:{props:e}},[t._v(t._s(e.row.carton_id))]),a(\"q-td\",{key:\"quantity\",attrs:{props:e}},[t._v(t._s(e.row.quantity))])],1)}}])})],1):t._e(),\"A\"==t.cartonType?a(\"q-tab-pane\",{attrs:{name:\"tab-3\"}},[a(\"q-table\",{attrs:{loading:t.loading,title:\"Last Flushed A Cartons\",data:t.pickedCartonsDataA,columns:t.picklistA,\"row-key\":\"name\"},scopedSlots:t._u([{key:\"body\",fn:function(e){return a(\"q-tr\",{attrs:{props:e}},[a(\"q-td\",{key:\"carton_id\",attrs:{props:e}},[t._v(t._s(e.row.carton_id))]),a(\"q-td\",{key:\"quantity\",attrs:{props:e}},[t._v(t._s(e.row.quantity))]),a(\"q-td\",{key:\"carton_status\",attrs:{props:e}},[t._v(\"Flushed\")]),a(\"q-td\",{key:\"created_at\",attrs:{props:e}},[t._v(t._s(e.row.created_at))])],1)}}])})],1):t._e()],1)],1):t._e()]),t.pageLoading?a(\"div\",{staticClass:\"row\"},[a(\"q-spinner\",{staticClass:\"vertical-middle\",staticStyle:{margin:\"0 auto\"},attrs:{color:\"green\",size:\"40px\"}})],1):t._e()])],1)},n=[];o._withStripped=!0;a(\"6b54\"),a(\"8615\"),a(\"6762\"),a(\"2fdb\"),a(\"cadf\"),a(\"456d\"),a(\"ac6a\");var i=a(\"9523\"),r=a.n(i),s=a(\"bc3a\"),d=a.n(s),l=a(\"c604\"),c=a(\"62a9\"),p=a(\"66d7\"),u=a(\"7b38\"),f=a(\"53fe\"),v=a(\"0952\"),m=a(\"7646\"),h=a(\"6580\"),b=a(\"5931\"),g=a(\"2f48\"),_=a(\"6186\"),C=a(\"7051\"),y=a(\"2a70\"),w=a(\"bc9b\"),I=a(\"525b\"),k=a(\"133b\"),q=a(\"206e\"),A=a(\"a360\"),B={components:{QTable:l[\"a\"],QTh:c[\"a\"],QTr:p[\"a\"],QTd:u[\"a\"],QTableColumns:f[\"a\"],QModal:v[\"a\"],QCard:m[\"a\"],QCardTitle:h[\"a\"],QSelect:b[\"a\"],QUploader:g[\"a\"],QSearch:_[\"a\"],QLayout:C[\"a\"],QModalLayout:y[\"a\"],QToggle:w[\"a\"],QCheckbox:I[\"a\"],Notify:k[\"a\"],QInnerLoading:q[\"a\"],QSpinnerHourglass:A[\"a\"]},data:function(){var t;return t={vendorData:[],pickData:[],pickedData:[],pickedCartonsDataA:[],picklistDataA:[],picklistDataB:[],apivendorData:[],pickedCartonsDataB:[],vendorAData:[],barcodeItemIdsA:{},barcodeItemIdsB:{},apiDataCartons:{},apiDataVendors:{},loading:!1,btnLoading:!1,cartonBtnLoading:!1,cartonId:\"\",a:[],Pagination:{rowsPerPage:1},showStatus:1,cartonType:\"\",scannedItem:\"\",scannedItemId:\"\",cartonIdforApi:\"\",scanCarton:\"\",pageLoading:!0,cartonTypeLoading:!1,vendorTablesColumn:[{name:\"carton_id\",required:!0,label:\"Carton ID\",align:\"left\",field:\"carton_id\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"created_at\",required:!0,label:\"Item Pushed In Carton At\",align:\"left\",field:\"created_at\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"item_id\",required:!0,label:\"Item ID\",align:\"left\",field:\"item_id\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"location_id\",required:!0,label:\"Located At\",align:\"left\",field:\"location_id\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"status_id\",required:!0,label:\"Carton Status\",align:\"left\",field:\"status_id\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"}],pickTablesColumn:[{name:\"carton_id\",required:!0,label:\"Carton ID\",align:\"left\",field:\"carton_id\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"item_id\",required:!0,label:\"Item ID\",align:\"left\",field:\"item_id\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"location_id\",required:!0,label:\"Located At\",align:\"left\",field:\"location_id\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"picked_status\",required:!0,label:\"Flushed Status\",align:\"left\",field:\"picked_status\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"}],pickedTablesColumn:[{name:\"CartonID\",required:!0,label:\"Carton ID\",align:\"left\",field:\"CartonID\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"ItemID\",required:!0,label:\"Item ID\",align:\"left\",field:\"ItemID\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"},{name:\"LocatedAt\",required:!0,label:\"Located At\",align:\"left\",field:\"LocatedAt\",sortable:!0,classes:\"my-class\",style:\"width: 500px\"}],picklistA:[{name:\" \",required:!0,label:\" \",align:\"left\",field:\"pickall\",classes:\"my-class\",style:\"width: 500px\"},{name:\"carton_id\",required:!0,label:\"Carton ID\",align:\"left\",field:\"carton_id\",classes:\"my-class\",style:\"width: 500px\"},{name:\"quantity\",required:!0,label:\"Quantity\",align:\"left\",field:\"quantity\",classes:\"my-class\",style:\"width: 500px\"}]},r()(t,\"loading\",!1),r()(t,\"vendorIdOption\",[]),r()(t,\"pickedData\",[]),r()(t,\"vendorId\",\"\"),r()(t,\"cartonTypeOptions\",[{label:\"A\",value:\"A\"},{label:\"B\",value:\"B\"}]),r()(t,\"vendorIdOptionList\",[]),r()(t,\"selectedSecond\",[]),r()(t,\"showNotAvailable\",!0),r()(t,\"selected\",[]),t},mounted:function(){var t=this;t.getShareLimit()},created:function(){var t=this;t.userStat=firebase.auth().currentUser.uid,t.getVendorList(),t.getShareLimit()},methods:{storeToFirestore:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;firebase.firestore().collection(\"userStats\").add({user_id:t,job_id:e,carton_id:a})},getTimeFormat:function(){var t=new Date,e=String(t.getDate()),a=String(t.getMonth()),o=String(t.getFullYear()),n=String(t.getHours()),i=String(t.getMinutes()),r=String(t.getSeconds()),s=e+\"/\"+a+\"/\"+o+\" \"+n+\":\"+i+\":\"+r;return s},closeCarton:function(){if(\"B\"===this.cartonType){var t=this.closeCartonID;firebase.database().ref(\"CartonB/\"+t).remove(),firebase.database().ref(\"BClosedCartons\").child(t).set({carton_id:t,created_at:this.getTimeFormat()})}},getCartonList:function(){this.cartonId=\"\";var t=this,e=\"\",a=[],o=\"Carton\"+t.cartonType;e=window.app2.database().ref(o),e.once(\"value\",function(e){if(t.cartonIdOptions=[],e.val())e.forEach(function(e){t.closeCartonList=[];var o={label:e.val().carton_id,value:e.val().carton_id};a.push(o),t.closeCartonList=a,e.val().carton_id&&(t.closeCartonID=e.val().carton_id,t.cartonId=e.val().carton_id)}),t.resetValues();else{var o=[];k[\"a\"].create({message:\"No Cartons Available To Close in Type \"+t.cartonType,position:\"center\",icon:\"warning\",timeout:80}),a.push(o),t.closeCartonList=a,t.resetValues()}})},getNewCarton:function(){var t=this;if(\"B\"===t.cartonType){var e=firebase.database().ref(\"CartonFreeB\");e.once(\"value\",function(e){if(\"\"===t.cartonId){t.cartonId=e.val()[Object.keys(e.val())[0]][\"carton_id\"],firebase.database().ref(\"CartonFreeB/\"+t.cartonId).remove(),firebase.database().ref(\"CartonB\").child(t.cartonId).set({carton_id:t.cartonId,created_at:t.getTimeFormat()});var a={label:t.cartonId,value:t.cartonId};t.closeCartonList=[a]}})}},getVendorList:function(){var t=this;t.vendorIdOption=[];var e=window.app2.database().ref(\"Vendors\");e.once(\"value\",function(e){t.vendorIdOption=[],e.forEach(function(e){var a=e.key;t.vendorIdOption.push({label:e.val().Name,value:a})})})},generatePickList:function(){var t=this;t.pickData=[],t.pickedData=[];this.vendorData.forEach(function(e){e.location_id&&(\"Location Not Assigned\"!==e.location_id&&\"Closed\"==e.status_id&&(t.pickData.push(e),t.pickedData.push({LocatedAt:e.location_id,CartonID:e.carton_id,ItemID:e.item_id})),setTimeout(function(){t.$refs.scannedItemId.focus()}))}),t.loading=!1},getVendorItems:function(){var t=this;if(t.scanCarton=\"\",\"A\"==t.cartonType)t.getVendorAData(),setTimeout(function(){t.$refs.scanCarton.focus()});else{setTimeout(function(){t.$refs.scanCarton.focus()}),t.loading=!0,t.vendorData=[],t.pickData=[],t.pickedData=[];var e={},a={},o=[],n=0,i=[];t.pickedCartonsDataB=[];var r=window.app2.database().ref(\"PickingBCarton\").orderByChild(\"vendor_id\").equalTo(t.vendorId);r.once(\"value\",function(r){r.val()&&r.forEach(function(r){if(t.barcodeItemIdsB={},0==r.val()[\"picked\"]&&1==r.val()[\"closed\"]){var s=r.val()[\"carton_id\"];e[s]=r.val();var d=[],l=window.app2.database().ref(\"ItemCartonB\").orderByChild(\"carton_id\").equalTo(s);l.once(\"value\",function(a){a.val()?(a.forEach(function(t){-1===d.indexOf(t.val().item_id)&&d.push(t.val().item_id)}),n=Object.keys(a.val()).length):n=0,e[s][\"quantity\"]=n,o.push(e[s]),t.picklistDataB=o,t.loading=!1,t.barcodeItemIdsB[s]=d})}if(1===r.val()[\"picked\"]&&1===r.val()[\"closed\"]){s=r.val()[\"carton_id\"];a[s]=r.val();l=window.app2.database().ref(\"ItemCartonB\").orderByChild(\"carton_id\").equalTo(s);l.once(\"value\",function(e){n=e.val()?Object.keys(e.val()).length:0,a[s][\"quantity\"]=n,i.push(a[s]),t.pickedCartonsDataB=i,e.forEach(function(e){var a=e.val()[\"item_id\"];null!=a&&\"\"!=a&&(window.app2.database().ref(\"ItemCartonB/\"+a).remove(),window.app2.database().ref(\"Items/\"+a).remove(),window.app2.database().ref(\"VendorItems/\"+t.vendorId+\"/\"+a).remove(),window.app2.database().ref(\"PickingBCarton/\"+s).remove()),t.picklistDataB.length||t.vendorIdOptionList.forEach(function(e,a,o){e[\"value\"]===t.vendorId&&(t.vendorIdOptionList.splice(a,1),k[\"a\"].create({message:\"Flush Completed for this Vendor\",position:\"center\",icon:\"warning\",timeout:80}),t.vendorId=\"\",t.vendorIdOptionList.length||(t.showNotAvailable=!0))})}),t.loading=!1})}})})}},checkVendorType:function(){var t=this;t.loading=!0,setTimeout(function(){t.loading=!1},2e3),t.getVendorType()},pickItem:function(t){},flush:function(){var t=this,e=[];t.pickData.forEach(function(a){a.location_id?-1===e.indexOf(a.carton_id)&&e.push(a.carton_id):t.$q.notify({color:\"black\",textColor:\"white\",message:\"Location is not assigned For Carton \"+a.carton_id,position:\"center\",timeout:80})}),e.forEach(function(e){window.app2.database().ref(\"BClosedCartons/\"+e).remove(),window.app2.database().ref(\"ItemCartonB\").once(\"value\",function(t){t.forEach(function(t){t.val().carton_id==e&&(window.app2.database().ref(\"Location/\"+t.val().location_id+\"/status\").set(\"UnAssigned\"),window.app2.database().ref(\"ItemCartonB/\"+t.key).remove())})}),t.$q.notify({color:\"black\",textColor:\"white\",message:e+\" Carton Flushed\",position:\"center\",timeout:80}),t.vendorData=[]})},getShareLimit:function(){var t=this;\"\"!==t.$store.state.example.userName?window.app2.database().ref(\"WareHouseSettings\").once(\"value\",function(e){t.vendorLimit=e.val().VendorLimit,t.topVendors={},t.totalVendors={},t.getVendors(),t.pageLoading=!1}):setTimeout(function(){t.getShareLimit()},500)},getVendors:function(){var t=this;window.app2.database().ref(\"Vendors\").once(\"value\",function(e){e.forEach(function(e){t.totalVendors[e.val().Vendor_id]||(t.totalVendors[e.val().Vendor_id]=e.val().share)}),t.getTopVendors()})},getTopVendors:function(){var t=this;t.temp_vendor=\"\",t.temp_vendor=Object.keys(t.totalVendors).reduce(function(e,a){return t.totalVendors[e]>t.totalVendors[a]?e:a}),!t.topVendors[t.temp_vendor]&&Object.keys(t.topVendors).length<t.vendorLimit&&(t.topVendors[t.temp_vendor]=t.totalVendors[t.temp_vendor],delete t.totalVendors[t.temp_vendor],t.getTopVendors())},getVendorForBinType:function(){var t=this;if(t.a=[],t.cartonTypeLoading=!0,t.vendorId=\"\",t.topVendors){var e=Object.keys(t.topVendors);if(\"A\"===t.cartonType&&(t.vendorIdOptionList=[],t.vendorIdOption.forEach(function(a){e.includes(a.value)&&window.app2.database().ref(\"AClosedCartons\").orderByChild(\"vendor_id\").equalTo(a.value).once(\"value\",function(e){e.val()&&(t.a.includes(a.value)||(t.vendorIdOptionList.push({label:a.label,value:a.value}),t.a.push(a.value),t.showNotAvailable=!1)),t.cartonTypeLoading=!1})})),\"B\"===t.cartonType){t.vendorIdOptionList=[];var a=[],o=window.app2.database().ref(\"PickingBCarton\").orderByChild(\"closed\").equalTo(1);o.once(\"value\",function(e){e.forEach(function(e){a.includes(e.val()[\"vendor_id\"])||(a.push(e.val()[\"vendor_id\"]),window.app2.database().ref(\"Vendors/\"+e.val()[\"vendor_id\"]).once(\"value\",function(e){var a=e.key;t.vendorIdOptionList.push({label:e.val().Name,value:a})}))}),t.cartonTypeLoading=!1})}}},getVendorAData:function(t){var e=this;e.loading=!0;e.vendorAData=[],\"all\"===t&&(e.picklistDataA=[]),e.pickedCartonsDataA=[];var a=[],o=[],n={},i=\"\";window.app2.database().ref(\"AClosedCartons\").orderByChild(\"vendor_id\").equalTo(e.vendorId).once(\"value\",function(t){t.val()&&(e.loading=!0,t.forEach(function(t){if(e.loading=!0,n[t.val()[\"carton_id\"]]=t.val(),i=t.val()[\"carton_id\"],parseInt(n[i][\"picked\"])&&(o.push(n[i]),e.pickedCartonsDataA=o,1===e.picklistDataA.length&&(e.picklistDataA=[])),1===parseInt(t.val()[\"picked\"])){var r=window.app2.database().ref(\"ItemCartonA\").orderByChild(\"carton_id\").equalTo(t.val()[\"carton_id\"]);r.once(\"value\",function(t){if(t.val()){if(e.loading=!0,i=Object.values(t.val())[0][\"carton_id\"],Object.keys(n).includes(i)){n[i][\"quantity\"]=Object.keys(t.val()).length;var a=Object.keys(t.val());a.forEach(function(t){window.app2.database().ref(\"ItemCartonA/\"+t).remove(),window.app2.database().ref(\"Items/\"+t).remove(),window.app2.database().ref(\"VendorItems/\"+e.vendorId+\"/\"+t).remove()})}e.loading=!1}e.picklistDataA.length||e.vendorIdOptionList.forEach(function(t,a,o){t[\"value\"]===e.vendorId&&(e.vendorIdOptionList.splice(a,1),k[\"a\"].create({message:\"Flush Completed for this Vendor\",position:\"center\",icon:\"warning\",timeout:80}),e.vendorIdOptionList.length||(e.showNotAvailable=!0))})}),window.app2.database().ref(\"AClosedCartons/\"+i).remove(),window.app2.database().ref(\"CartonA\").child(i).set({carton_id:i,closed:1,created_at:e.getTimeFormat(),vendor_id:e.vendorId}),e.vendorId=\"\"}else{e.barcodeItemIdsA={};var s=[],d=t.val()[\"carton_id\"];r=window.app2.database().ref(\"ItemCartonA\").orderByChild(\"carton_id\").equalTo(t.val()[\"carton_id\"]);r.once(\"value\",function(t){t.val()?(e.loading=!0,d=t.val()[Object.keys(t.val())[0]][\"carton_id\"],t.forEach(function(t){-1===s.indexOf(t.val().item_id)&&s.push(t.val().item_id)}),n[d][\"quantity\"]=Object.keys(t.val()).length,parseInt(n[d][\"picked\"])?(o.push(n[d]),e.pickedCartonsDataA=o):(a.push(n[d]),e.picklistDataA=a),e.loading=!1):(e.vendorIdOptionList.forEach(function(t,a,o){t[\"value\"]===e.vendorId&&(e.vendorIdOptionList.splice(a,1),k[\"a\"].create({message:\"Flush Completed for this Vendor\",position:\"center\",icon:\"warning\",timeout:80}),e.vendorId=\"\",e.vendorIdOptionList.length||(e.showNotAvailable=!0))}),window.app2.database().ref(\"AClosedCartons/\"+d).remove(),window.app2.database().ref(\"CartonA\").child(d).set({carton_id:d,closed:1,modified_at:e.getTimeFormat(),vendor_id:e.vendorId})),e.barcodeItemIdsA[d]=s})}e.loading=!1}),e.loading=!1)}),e.loading=!1},pickACarton:function(t){var e=this;if(13===event.keyCode||\"click\"===event.type){e.cartonBtnLoading=!0;var a=t[\"carton_id\"];e.storeToFirestore(e.$store.state.example.userName,\"JO06\",a),window.app2.database().ref(\"AClosedCartons/\").orderByChild(\"vendor_id\").equalTo(e.vendorId).once(\"value\",function(t){return t.val()&&Object.keys(t.val()).includes(a)?(window.app2.database().ref(\"AClosedCartons/\"+a+\"/picked\").set(1),e.getVendorAData(),e.scanCarton=\"\",void(e.cartonBtnLoading=!1)):(k[\"a\"].create({message:\"Carton Not Available in Picking Page, Do Close Carton\",position:\"center\",icon:\"thumb_down\",timeout:80}),e.scanCarton=\"\",e.cartonBtnLoading=!1,!1)}),e.$refs.scanCarton.focus()}},apiData:function(t){var e=this;e.cartonIdforApi=t.carton_id,e.apiDataCartons={};var a={},o={},n={};window.app2.database().ref(\"Vendors/\"+this.vendorId).once(\"value\",function(n){o={id:n.val().Vendor_id,name:n.val().Name},window.app2.database().ref(\"ItemCartonB\").orderByChild(\"carton_id\").equalTo(t.carton_id).once(\"value\",function(t){t.forEach(function(t){a[t.val().item_id]={created:1}}),e.apiDataCartons[e.cartonIdforApi]=a}),console.log(window.app2.database().key)}),setTimeout(function(){n[\"vendor\"]=o,n[\"cartons\"]=e.apiDataCartons,n[\"status\"]=0,n[\"projectId\"]=e.$store.state.example.masterDB,window.app2.database().ref(\"flushedCartons\").push(n)},2e3)},pickBCarton:function(t){var e=this;if(e.apiData(t),13===event.keyCode||\"click\"===event.type){var a=t[\"carton_id\"];e.storeToFirestore(e.$store.state.example.userName,\"JO07\",a);var o=0;window.app2.database().ref(\"PickingBCarton/\"+a).update({picked:1,modified_at:e.getTimeFormat()}),e.picklistDataB.forEach(function(t,n,i){t[\"carton_id\"]===a&&(e.picklistDataB.splice(n,1),o=1)}),0===o&&k[\"a\"].create({message:\"Carton Not Available\",position:\"center\",icon:\"thumb_down\",timeout:80}),e.getVendorItems()}},pickAllACarton:function(t){var e=this;e.btnLoading=!0;var a=t.length;t.forEach(function(t,o,n){if(t){var i=t[\"carton_id\"];window.app2.database().ref(\"AClosedCartons/\"+i+\"/picked\").set(1),a-1===o&&e.getVendorAData(\"all\")}}),e.$refs.scanCarton.focus(),e.btnLoading=!1},pickAllBCarton:function(t){var e=this,a=t.length,o=t;o.forEach(function(t,o,n){if(t){var i=t[\"carton_id\"];window.app2.database().ref(\"PickingBCarton/\"+i).update({picked:1,modified_at:e.getTimeFormat()}),a-1===o&&(e.picklistDataB=[],e.getVendorItems())}})},pickBItem:function(t){var e=this;if(t.picked_status)k[\"a\"].create({message:\"Item Already Flushed\",position:\"center\",icon:\"warning\",timeout:80});else{var a=0;e.pickData.forEach(function(o){t.item_id==o.item_id&&(e.pickData[a].picked_status=!0),a++}),a=0,e.pickedData.forEach(function(a){t.item_id==a.ItemID&&e.pickedData.splice(a.__index,1)})}e.resetValues(),window.app2.database().ref(\"ItemCartonB/\"+t.item_id).remove(),window.app2.database().ref(\"Items/\"+t.item_id).remove(),window.app2.database().ref(\"VendorItems/\"+this.vendorId+\"/\"+t.item_id).remove()},resetValues:function(){var t=this;t.scannedItemId=\"\"},updateItemBPicked:function(){if(13===event.keyCode){var t=this.scannedItemId,e=this.getItemRow(t);\"\"!=e?this.pickBItem(e[\"value\"]):(k[\"a\"].create({message:\"Item Not Available For Picking\",position:\"center\",icon:\"thumb_down\",timeout:80}),this.resetValues())}},getItemRow:function(t){var e=\"\";return this.pickData.forEach(function(a){a.item_id===t&&(e={value:a,index_val:a.__index})}),e},generateBarcodePdfB:function(){var t=this,e={},a=Object.keys(t.barcodeItemIdsB);e[\"customer\"]=t.vendorId;for(var o=[],n=0;n<a.length;n++)o.push({Label:a[n],carton_number:a[n],Items:t.barcodeItemIdsB[a[n]].toString()});e[\"info\"]=o,e[\"type\"]=1,e[\"show_fields\"]=[\"Items\",\"carton_number\"],e[\"rows_column\"]=[1,1],e[\"styles\"]={leftIndent:4,spaceAfter:4,spaceBefore:4,fontName:\"Arial\",fontSize:6,spaceShrinkage:12,leading:9,showBoundary:.1,rightIndent:0,margin:[0,10,0,5]},e[\"format_type\"]=\"format1_A4\";t=this;d.a.post(\"http://stn.mie.one/barcodes/get_barcodes/\",e).then(function(t){console.log(t);var a=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement(\"a\");o.href=a,o.setAttribute(\"download\",e.customer+\".pdf\"),document.body.appendChild(o),o.click()}),console.log(e)},generateBarcodePdfA:function(){var t=this,e={},a=Object.keys(t.barcodeItemIdsA);e[\"customer\"]=t.vendorId;for(var o=[],n=0;n<a.length;n++)o.push({Label:a[n],carton_number:a[n],Items:t.barcodeItemIdsA[a[n]].toString()});e[\"info\"]=o,e[\"type\"]=1,e[\"show_fields\"]=[\"Items\",\"carton_number\"],e[\"rows_column\"]=[1,1],e[\"styles\"]={leftIndent:4,spaceAfter:4,spaceBefore:4,fontName:\"Arial\",fontSize:6,spaceShrinkage:12,leading:9,showBoundary:.1,rightIndent:0,margin:[0,10,0,5]},e[\"format_type\"]=\"format1_A4\";t=this;d.a.post(\"http://stn.mie.one/barcodes/get_barcodes/\",e).then(function(t){console.log(t);var a=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement(\"a\");o.href=a,o.setAttribute(\"download\",e.customer+\".pdf\"),document.body.appendChild(o),o.click()})}}},T=B,L=(a(\"c2ce\"),a(\"2877\")),D=Object(L[\"a\"])(T,o,n,!1,null,null,null);D.options.__file=\"flushCarton.vue\";e[\"default\"]=D.exports},\"4ee9\":function(t,e,a){},\"504c\":function(t,e,a){var o=a(\"0d58\"),n=a(\"6821\"),i=a(\"52a7\").f;t.exports=function(t){return function(e){var a,r=n(e),s=o(r),d=s.length,l=0,c=[];while(d>l)i.call(r,a=s[l++])&&c.push(t?[a,r[a]]:r[a]);return c}}},8615:function(t,e,a){var o=a(\"5ca1\"),n=a(\"504c\")(!1);o(o.S,\"Object\",{values:function(t){return n(t)}})},a360:function(t,e,a){\"use strict\";var o=a(\"0b3d\");e[\"a\"]={name:\"QSpinnerHourglass\",mixins:[o[\"a\"]],render:function(t){return t(\"svg\",{staticClass:\"q-spinner\",class:this.classes,attrs:{width:this.size,height:this.size,viewBox:\"0 0 100 100\",preserveAspectRatio:\"xMidYMid\",xmlns:\"http://www.w3.org/2000/svg\"}},[t(\"g\",[t(\"path\",{staticClass:\"glass\",attrs:{fill:\"none\",stroke:\"currentColor\",\"stroke-width\":\"5\",\"stroke-miterlimit\":\"10\",d:\"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z\"}}),t(\"clipPath\",{attrs:{id:\"uil-hourglass-clip1\"}},[t(\"rect\",{staticClass:\"clip\",attrs:{x:\"15\",y:\"20\",width:\"70\",height:\"25\"}},[t(\"animate\",{attrs:{attributeName:\"height\",from:\"25\",to:\"0\",dur:\"1s\",repeatCount:\"indefinite\",vlaues:\"25;0;0\",keyTimes:\"0;0.5;1\"}}),t(\"animate\",{attrs:{attributeName:\"y\",from:\"20\",to:\"45\",dur:\"1s\",repeatCount:\"indefinite\",vlaues:\"20;45;45\",keyTimes:\"0;0.5;1\"}})])]),t(\"clipPath\",{attrs:{id:\"uil-hourglass-clip2\"}},[t(\"rect\",{staticClass:\"clip\",attrs:{x:\"15\",y:\"55\",width:\"70\",height:\"25\"}},[t(\"animate\",{attrs:{attributeName:\"height\",from:\"0\",to:\"25\",dur:\"1s\",repeatCount:\"indefinite\",vlaues:\"0;25;25\",keyTimes:\"0;0.5;1\"}}),t(\"animate\",{attrs:{attributeName:\"y\",from:\"80\",to:\"55\",dur:\"1s\",repeatCount:\"indefinite\",vlaues:\"80;55;55\",keyTimes:\"0;0.5;1\"}})])]),t(\"path\",{staticClass:\"sand\",attrs:{d:\"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z\",\"clip-path\":\"url(#uil-hourglass-clip1)\",fill:\"currentColor\"}}),t(\"path\",{staticClass:\"sand\",attrs:{d:\"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z\",\"clip-path\":\"url(#uil-hourglass-clip2)\",fill:\"currentColor\"}}),t(\"animateTransform\",{attrs:{attributeName:\"transform\",type:\"rotate\",from:\"0 50 50\",to:\"180 50 50\",repeatCount:\"indefinite\",dur:\"1s\",values:\"0 50 50;0 50 50;180 50 50\",keyTimes:\"0;0.7;1\"}})])])}}},c2ce:function(t,e,a){\"use strict\";var o=a(\"4ee9\"),n=a.n(o);n.a}}]);","extractedComments":[]}