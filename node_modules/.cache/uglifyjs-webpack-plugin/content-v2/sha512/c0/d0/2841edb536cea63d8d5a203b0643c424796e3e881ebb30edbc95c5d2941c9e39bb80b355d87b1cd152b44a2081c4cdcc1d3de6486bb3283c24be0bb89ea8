{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"4175b9d6\"],{\"7afc\":function(e,t,a){\"use strict\";var n=a(\"ab87\"),o=a.n(n);o.a},ab87:function(e,t,a){},b467:function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"About\"},[a(\"q-card\",{staticClass:\"bg-white card-styl\"},[a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-6 col-md-6 col-sm-6 col-xs-6\"},[a(\"h3\",{staticClass:\"inner_head_styl\"},[e._v(\"Primary Sort\")])]),a(\"div\",{staticClass:\"col-lg-6 col-md-6 col-sm-6 col-xs-6\",attrs:{align:\"right\"}},[a(\"q-btn\",{attrs:{slot:\"right\"},on:{click:function(t){e.getDownloadData()}},slot:\"right\"},[e._v(\"Current Sorted Items\")])],1)]),a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"}),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"},[a(\"q-field\",[a(\"q-input\",{ref:\"scannedItem\",attrs:{type:\"text\",id:\"scanFocus\",\"float-label\":\"Scan Item *\"},on:{keyup:e.checkBinType},model:{value:e.scannedItem,callback:function(t){e.scannedItem=t},expression:\"scannedItem\"}})],1),e.binType&&e.saveScannedItem&&!e.loading?a(\"div\",[a(\"h1\",{staticClass:\"text-center big-font\",class:e.binClass},[a(\"span\",{staticClass:\"small-font\"},[e._v(e._s(e.saveScannedItem)+\"   :\")]),e._v(\"  \"+e._s(e.binType))])]):e._e(),a(\"div\",{staticClass:\"text-center\"},[e.noItemErr&&e.saveScannedItem&&!e.loading?a(\"h5\",{staticClass:\"text-negative\"},[e._v(\"Scanned item not available\")]):e._e(),e.loading?a(\"q-spinner\",{staticStyle:{margin:\"0 auto\"},attrs:{color:\"green\",size:\"40px\"}}):e._e()],1)],1),a(\"div\",{staticClass:\"col-lg-4 col-md-4 col-sm-12 col-xs-12\"})])])],1)},o=[];n._withStripped=!0;a(\"a481\");var i=a(\"7037\"),s=a.n(i),r=(a(\"6762\"),a(\"2fdb\"),a(\"ac6a\"),a(\"2ef0\"),a(\"bc3a\")),c=a.n(r),l=a(\"c604\"),d=a(\"62a9\"),u=a(\"66d7\"),m=a(\"7b38\"),v=a(\"53fe\"),f=a(\"0952\"),p=a(\"7646\"),g=a(\"6580\"),h=a(\"5931\"),b=a(\"2f48\"),S=a(\"6186\"),I=a(\"7051\"),y=a(\"2a70\"),_=a(\"bc9b\"),C=a(\"206e\"),w={components:{QTable:l[\"a\"],QTh:d[\"a\"],QTr:u[\"a\"],QTd:m[\"a\"],QTableColumns:v[\"a\"],QModal:f[\"a\"],QCard:p[\"a\"],QCardTitle:g[\"a\"],QSelect:h[\"a\"],QUploader:b[\"a\"],QSearch:S[\"a\"],QLayout:I[\"a\"],QModalLayout:y[\"a\"],QToggle:_[\"a\"],QInnerLoading:C[\"a\"]},data:function(){return{location:[],SettingsCollection:\"WareHouseSettings\",dwnloadData:[],userModalAdd:!0,loading:!1,binType:\"\",scannedItem:\"\",totalVendors:{},topVendors:[],vendorLimit:0,temp_vendor:\"\",noItemErr:!1,saveScannedItem:\"\",binClass:\"\",userStat:\"\",htmlData:\"\",currentSort:[],VendorLimit:0}},mounted:function(){var e=this;e.getVendorLimit(),e.$refs.scannedItem.focus(),firebase.auth().onAuthStateChanged(function(t){t?firebase.database(app2).ref(\"UserDetails/\"+t.uid).once(\"value\",function(t){e.currentUserDetails=t.val()}):e.$router.push(\"/\")})},created:function(){var e=this;e.getVendorLimit(),e.$refs.scannedItem.focus(),firebase.auth().onAuthStateChanged(function(t){t?firebase.database(app2).ref(\"UserDetails/\"+t.uid).once(\"value\",function(t){e.currentUserDetails=t.val()}):e.$router.push(\"/\")})},methods:{getVendorLimit:function(){var e=this;\"\"!==e.$store.state.example.userName?window.app2.database().ref(\"WareHouseSettings/VendorLimit\").on(\"value\",function(t){t.val()&&(e.VendorLimit=t.val()),e.getAVendors()}):setTimeout(function(){e.getVendorLimit()},500)},getAVendors:function(){var e=this;window.app2.database().ref(\"AVendors\").on(\"value\",function(t){e.topVendors=[];var a=0;t.forEach(function(t){a++,a<=e.VendorLimit&&e.topVendors.push(t.key)})})},getDownloadData:function(){var e=this;e.location=[],firebase.firestore().collection(\"userStats\").where(\"created_at\",\"==\",(new Date).toLocaleDateString()).get().then(function(t){t.forEach(function(t){t.data().location_id==localStorage.getItem(\"wareHouseId\")&&\"JO01\"===t.data().job_id&&e.location.push({Bin:t.data().bin_type,Item:t.data().item_id,Vendor:t.data().vendor_id})})}),setTimeout(function(){e.JSONToCSVConvertor(e.location,\"Primary Sort List\",!0)},2e3)},storeToFirestore:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;firebase.firestore().collection(\"userStats\").add({user_id:e,job_id:t,item_id:a,location_id:n,created_at:(new Date).toLocaleDateString(),bin_type:o,vendor_id:i})},getBinType:function(){var e=this,t=window.app2.database().ref(\"Items\");window.app2.database().ref(\"AVendors\");t.child(e.scannedItem).once(\"value\",function(a){if(a.val()){if(e.topVendors.includes(a.val().vendor_id)){e.binType=\"A\",e.noItemErr=!1,e.binClass=\"text-positive\",t.child(\"primarySortFlag\").set(1),t.child(\"primarySortDate\").set(e.convertDate(new Date));var n={item:e.scannedItem,primarySortFlag:1,user_obj:e.currentUserDetails};console.log(n),c.a.post(baseUrlForBackend+\"/item/processed\",n).then(function(e){console.log(e)})}else{e.binType=\"B\",e.noItemErr=!1,e.binClass=\"text-blue-8\",t.child(\"primarySortFlag\").set(1),t.child(\"primarySortDate\").set(e.convertDate(new Date));n={item:e.scannedItem,primarySortFlag:1,user_obj:e.currentUserDetails};console.log(n),c.a.post(baseUrlForBackend+\"/item/processed\",n).then(function(e){console.log(e)})}e.currentSort.push({Bin:e.binType,Item:e.scannedItem,Vendor:a.val().vendor_id}),e.storeToFirestore(e.$store.state.example.userName,\"JO01\",e.scannedItem,localStorage.getItem(\"wareHouseId\"),e.binType,a.val().vendor_id)}else{e.binType=\"\";var o=new Audio(\"/statics/beep1.mp3\");o.play(),e.noItemErr=!0}e.scannedItemChange()})},scannedItemChange:function(){var e=this;e.saveScannedItem=e.scannedItem,e.$refs.scannedItem.focus(),e.scannedItem=\"\",e.loading=!1},checkBinType:function(e){var t=this;13===e.keyCode&&(t.loading=!0,t.scannedItem&&t.getBinType())},JSONToCSVConvertor:function(e,t,a){var n=\"object\"!=s()(e)?JSON.parse(e):e,o=\"\";if(o+=t+\"\\r\\n\\n\",a){var i=\"\";for(var r in n[0])i+=r+\",\";i=i.slice(0,-1),o+=i+\"\\r\\n\"}for(var c=0;c<n.length;c++){i=\"\";for(var r in n[c])i+='\"'+n[c][r]+'\",';i.slice(0,i.length-1),o+=i+\"\\r\\n\"}if(\"\"!=o){var l=t.replace(/ /g,\"_\"),d=\"data:text/csv;charset=utf-8,\"+escape(o),u=document.createElement(\"a\");u.href=d,u.style=\"visibility:hidden\",u.download=l+\".csv\",document.body.appendChild(u),u.click(),document.body.removeChild(u)}else alert(\"Invalid data\")},convertDate:function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate(),o=t.getFullYear();n<10&&(n=\"0\"+n),a<10&&(a=\"0\"+a);var i=n+\"-\"+a+\"-\"+o;return i}}},D=w,T=(a(\"7afc\"),a(\"2877\")),V=Object(T[\"a\"])(D,n,o,!1,null,null,null);V.options.__file=\"primarySort.vue\";t[\"default\"]=V.exports}}]);","extractedComments":[]}